<?xml version="1.0" encoding="UTF-8"?>
<Form xmlns="http://v8.1c.ru/8.3/xcf/logform" xmlns:app="http://v8.1c.ru/8.2/managed-application/core" xmlns:cfg="http://v8.1c.ru/8.1/data/enterprise/current-config" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcssch="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:ent="http://v8.1c.ru/8.1/data/enterprise" xmlns:lf="http://v8.1c.ru/8.2/managed-application/logform" xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows" xmlns:xr="http://v8.1c.ru/8.3/xcf/readable" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.18">
	<Title>
		<v8:item>
			<v8:lang>ru</v8:lang>
			<v8:content>Выберите распоряжение</v8:content>
		</v8:item>
	</Title>
	<AutoTitle>false</AutoTitle>
	<CommandSet>
		<ExcludedCommand>Choose</ExcludedCommand>
	</CommandSet>
	<AutoCommandBar name="ФормаКоманднаяПанель" id="-1">
		<Autofill>false</Autofill>
	</AutoCommandBar>
	<Events>
		<Event name="OnCreateAtServer">ПриСозданииНаСервере</Event>
	</Events>
	<ChildItems>
		<Table name="Список" id="1">
			<ChoiceMode>true</ChoiceMode>
			<UseAlternationRowColor>true</UseAlternationRowColor>
			<EnableStartDrag>true</EnableStartDrag>
			<FileDragMode>AsFile</FileDragMode>
			<DataPath>Список</DataPath>
			<RowPictureDataPath>~Список.DefaultPicture</RowPictureDataPath>
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Список</v8:content>
				</v8:item>
			</Title>
			<CommandSet>
				<ExcludedCommand>Choose</ExcludedCommand>
			</CommandSet>
			<AutoRefresh>false</AutoRefresh>
			<AutoRefreshPeriod>60</AutoRefreshPeriod>
			<Period>
				<v8:variant xsi:type="v8:StandardPeriodVariant">Custom</v8:variant>
				<v8:startDate>0001-01-01T00:00:00</v8:startDate>
				<v8:endDate>0001-01-01T00:00:00</v8:endDate>
			</Period>
			<ChoiceFoldersAndItems>Items</ChoiceFoldersAndItems>
			<RestoreCurrentRow>false</RestoreCurrentRow>
			<TopLevelParent xsi:nil="true"/>
			<ShowRoot>true</ShowRoot>
			<AllowRootChoice>false</AllowRootChoice>
			<UpdateOnDataChange>Auto</UpdateOnDataChange>
			<AllowGettingCurrentRowURL>true</AllowGettingCurrentRowURL>
			<ContextMenu name="СписокКонтекстноеМеню" id="2"/>
			<AutoCommandBar name="СписокКоманднаяПанель" id="3">
				<ChildItems>
					<Button name="СписокВыбрать" id="58">
						<Type>CommandBarButton</Type>
						<DefaultButton>true</DefaultButton>
						<CommandName>Form.Command.Выбрать</CommandName>
						<ExtendedTooltip name="СписокВыбратьРасширеннаяПодсказка" id="59"/>
					</Button>
				</ChildItems>
			</AutoCommandBar>
			<ExtendedTooltip name="СписокРасширеннаяПодсказка" id="4"/>
			<SearchStringAddition name="СписокСтрокаПоиска" id="5">
				<AdditionSource>
					<Item>Список</Item>
					<Type>SearchStringRepresentation</Type>
				</AdditionSource>
				<ContextMenu name="СписокСтрокаПоискаКонтекстноеМеню" id="6"/>
				<ExtendedTooltip name="СписокСтрокаПоискаРасширеннаяПодсказка" id="7"/>
			</SearchStringAddition>
			<ViewStatusAddition name="СписокСостояниеПросмотра" id="8">
				<AdditionSource>
					<Item>Список</Item>
					<Type>ViewStatusRepresentation</Type>
				</AdditionSource>
				<HorizontalLocation>Left</HorizontalLocation>
				<ContextMenu name="СписокСостояниеПросмотраКонтекстноеМеню" id="9"/>
				<ExtendedTooltip name="СписокСостояниеПросмотраРасширеннаяПодсказка" id="10"/>
			</ViewStatusAddition>
			<SearchControlAddition name="СписокУправлениеПоиском" id="11">
				<AdditionSource>
					<Item>Список</Item>
					<Type>SearchControl</Type>
				</AdditionSource>
				<ContextMenu name="СписокУправлениеПоискомКонтекстноеМеню" id="12"/>
				<ExtendedTooltip name="СписокУправлениеПоискомРасширеннаяПодсказка" id="13"/>
			</SearchControlAddition>
			<Events>
				<Event name="Selection">СписокВыбор</Event>
			</Events>
			<ChildItems>
				<LabelField name="ТипЗначения" id="44">
					<DataPath>Список.ТипЗначения</DataPath>
					<Title>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Распоряжение</v8:content>
						</v8:item>
					</Title>
					<ContextMenu name="ТипЗначенияКонтекстноеМеню" id="45"/>
					<ExtendedTooltip name="ТипЗначенияРасширеннаяПодсказка" id="46"/>
				</LabelField>
				<LabelField name="Номер" id="26">
					<DataPath>Список.Номер</DataPath>
					<Width>10</Width>
					<ContextMenu name="НомерКонтекстноеМеню" id="27"/>
					<ExtendedTooltip name="НомерРасширеннаяПодсказка" id="28"/>
				</LabelField>
				<LabelField name="Дата" id="17">
					<DataPath>Список.Дата</DataPath>
					<Width>9</Width>
					<ContextMenu name="ДатаКонтекстноеМеню" id="18"/>
					<ExtendedTooltip name="ДатаРасширеннаяПодсказка" id="19"/>
				</LabelField>
				<LabelField name="Партнер" id="32">
					<DataPath>Список.Партнер</DataPath>
					<ContextMenu name="ПартнерКонтекстноеМеню" id="33"/>
					<ExtendedTooltip name="ПартнерРасширеннаяПодсказка" id="34"/>
				</LabelField>
				<LabelField name="Контрагент" id="23">
					<DataPath>Список.Контрагент</DataPath>
					<ContextMenu name="КонтрагентКонтекстноеМеню" id="24"/>
					<ExtendedTooltip name="КонтрагентРасширеннаяПодсказка" id="25"/>
				</LabelField>
				<LabelField name="Склад" id="55">
					<DataPath>Список.Склад</DataPath>
					<Title>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Склад</v8:content>
						</v8:item>
					</Title>
					<ContextMenu name="СкладКонтекстноеМеню" id="56"/>
					<ExtendedTooltip name="СкладРасширеннаяПодсказка" id="57"/>
				</LabelField>
				<LabelField name="Организация" id="29">
					<DataPath>Список.Организация</DataPath>
					<ContextMenu name="ОрганизацияКонтекстноеМеню" id="30"/>
					<ExtendedTooltip name="ОрганизацияРасширеннаяПодсказка" id="31"/>
				</LabelField>
			</ChildItems>
		</Table>
	</ChildItems>
	<Attributes>
		<Attribute name="Список" id="1">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Список</v8:content>
				</v8:item>
			</Title>
			<Type>
				<v8:Type>cfg:DynamicList</v8:Type>
			</Type>
			<MainAttribute>true</MainAttribute>
			<UseAlways>
				<Field>Список.Валюта</Field>
				<Field>Список.ВидЦеныПоставщика</Field>
				<Field>Список.Дата</Field>
				<Field>Список.Договор</Field>
				<Field>Список.Контрагент</Field>
				<Field>Список.Номер</Field>
				<Field>Список.Организация</Field>
				<Field>Список.Партнер</Field>
				<Field>Список.Склад</Field>
				<Field>Список.Соглашение</Field>
				<Field>Список.Ссылка</Field>
				<Field>Список.ТипЗначения</Field>
				<Field>Список.ХозяйственнаяОперация</Field>
				<Field>Список.ЭтоГруппаСкладов</Field>
			</UseAlways>
			<Settings xsi:type="DynamicList">
				<ManualQuery>true</ManualQuery>
				<DynamicDataRead>false</DynamicDataRead>
				<QueryText>ВЫБРАТЬ
	ДоговорыКонтрагентов.Ссылка КАК Ссылка,
	ДоговорыКонтрагентов.Дата КАК Дата,
	ДоговорыКонтрагентов.Номер КАК Номер,
	ДоговорыКонтрагентов.Наименование КАК Наименование,
	ДоговорыКонтрагентов.Партнер КАК Партнер,
	ДоговорыКонтрагентов.Контрагент КАК Контрагент,
	&amp;Соглашение КАК Соглашение,
	ВЫБОР
		КОГДА ДоговорыКонтрагентов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаУПоставщикаТоварыВПути)
			ТОГДА ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаУПоставщикаПоступлениеИзТоваровВПути)
		КОГДА ДоговорыКонтрагентов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаУПоставщикаФактуровкаПоставки)
			ТОГДА ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаУПоставщикаНеотфактурованнаяПоставка)
		КОГДА ДоговорыКонтрагентов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаВСтранахЕАЭСТоварыВПути)
			ТОГДА ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаВСтранахЕАЭСПоступлениеИзТоваровВПути)
		КОГДА ДоговорыКонтрагентов.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаВСтранахЕАЭСФактуровкаПоставки)
			ТОГДА ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаВСтранахЕАЭСНеотфактурованнаяПоставка)
		ИНАЧЕ ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаПоИмпортуПоступлениеИзТоваровВПути)
	КОНЕЦ КАК ХозяйственнаяОперация,
	ДоговорыКонтрагентов.Организация КАК Организация,
	ЗНАЧЕНИЕ(Справочник.Склады.ПустаяСсылка) КАК Склад,
	ЛОЖЬ КАК ЭтоГруппаСкладов,
	ДоговорыКонтрагентов.ВариантПриемкиТоваров КАК ВариантПриемкиТоваров,
	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК Валюта,
	ЗНАЧЕНИЕ(Справочник.Валюты.ПустаяСсылка) КАК ВидЦеныПоставщика,
	ДоговорыКонтрагентов.ПометкаУдаления КАК ПометкаУдаления
ПОМЕСТИТЬ ОтборПоДоговорам
ИЗ
	Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов
ГДЕ
	(ДоговорыКонтрагентов.Ссылка = &amp;Договор
			ИЛИ &amp;Договор = ЗНАЧЕНИЕ(Справочник.ДоговорыКонтрагентов.ПустаяСсылка))
	И ДоговорыКонтрагентов.ХозяйственнаяОперация В(&amp;ХозяйственныеОперацииДоговора)
	И (ДоговорыКонтрагентов.Партнер = &amp;Партнер
			ИЛИ &amp;Партнер = ЗНАЧЕНИЕ(Справочник.Партнеры.ПустаяСсылка))
	И (ДоговорыКонтрагентов.Организация = &amp;Организация
			ИЛИ &amp;Организация = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка))
	И (ДоговорыКонтрагентов.Контрагент = &amp;Контрагент
			ИЛИ &amp;Контрагент = ЗНАЧЕНИЕ(Справочник.Контрагенты.ПустаяСсылка))
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	СоглашенияСПоставщиками.Ссылка КАК Ссылка,
	СоглашенияСПоставщиками.Дата КАК Дата,
	СоглашенияСПоставщиками.Номер КАК Номер,
	СоглашенияСПоставщиками.Наименование КАК Наименование,	
	СоглашенияСПоставщиками.Партнер КАК Партнер,
	СоглашенияСПоставщиками.Контрагент КАК Контрагент,
	Значение(Перечисление.ХозяйственныеОперации.СписаниеРасхожденийПоступлениеПриобретение) КАК ХозяйственнаяОперация,
	СоглашенияСПоставщиками.Организация КАК Организация,
	СоглашенияСПоставщиками.Склад КАК Склад,
	ЕСТЬNULL(СоглашенияСПоставщиками.Склад.ЭтоГруппа, ЛОЖЬ) КАК ЭтоГруппаСкладов,
	СоглашенияСПоставщиками.ВариантПриемкиТоваров КАК ВариантПриемкиТоваров,
	СоглашенияСПоставщиками.Валюта КАК Валюта,
	СоглашенияСПоставщиками.ВидЦеныПоставщика КАК ВидЦеныПоставщика,
	СоглашенияСПоставщиками.ПометкаУдаления КАК ПометкаУдаления
ПОМЕСТИТЬ ОтборПоСоглашениям
ИЗ
	Справочник.СоглашенияСПоставщиками КАК СоглашенияСПоставщиками
ГДЕ
	(СоглашенияСПоставщиками.Ссылка = &amp;Соглашение
			ИЛИ &amp;Соглашение = ЗНАЧЕНИЕ(Справочник.СоглашенияСПоставщиками.ПустаяСсылка))
	И СоглашенияСПоставщиками.ХозяйственнаяОперация В(&amp;ХозяйственныеОперацииСоглашения)
	И (СоглашенияСПоставщиками.Партнер = &amp;Партнер
			ИЛИ &amp;Партнер = ЗНАЧЕНИЕ(Справочник.Партнеры.ПустаяСсылка))
	И (СоглашенияСПоставщиками.Организация = &amp;Организация
			ИЛИ &amp;Организация = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
			ИЛИ СоглашенияСПоставщиками.Организация = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка))
	И (СоглашенияСПоставщиками.Контрагент = &amp;Контрагент
			ИЛИ &amp;Контрагент = ЗНАЧЕНИЕ(Справочник.Контрагенты.ПустаяСсылка)
			ИЛИ СоглашенияСПоставщиками.Контрагент = ЗНАЧЕНИЕ(Справочник.Контрагенты.ПустаяСсылка))
	И (СоглашенияСПоставщиками.Склад В(&amp;Склады)
			ИЛИ СоглашенияСПоставщиками.Склад = ЗНАЧЕНИЕ(Справочник.Склады.ПустаяСсылка)
			ИЛИ &amp;БезОтбораПоСкладу)
	И СоглашенияСПоставщиками.ИспользуютсяДоговорыКонтрагентов
;
////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ТИПЗНАЧЕНИЯ(ЗаказПоставщику.Ссылка) КАК ТипЗначения,
	ЗаказПоставщику.Ссылка КАК Ссылка,
	ЗаказПоставщику.Номер КАК Номер,
	ЗаказПоставщику.Дата КАК Дата,
	ЗаказПоставщику.Партнер КАК Партнер,
	ЗаказПоставщику.Контрагент КАК Контрагент,
	ЗаказПоставщику.Соглашение КАК Соглашение, ВЫБОР
		КОГДА ЗаказПоставщику.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаУПоставщикаТоварыВПути)
			ТОГДА ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаУПоставщикаПоступлениеИзТоваровВПути)
		КОГДА ЗаказПоставщику.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаУПоставщикаФактуровкаПоставки)
			ТОГДА ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаУПоставщикаНеотфактурованнаяПоставка)
		КОГДА ЗаказПоставщику.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаВСтранахЕАЭСТоварыВПути)
			ТОГДА ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаВСтранахЕАЭСПоступлениеИзТоваровВПути)
		КОГДА ЗаказПоставщику.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаВСтранахЕАЭСФактуровкаПоставки)
			ТОГДА ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаВСтранахЕАЭСНеотфактурованнаяПоставка)
		КОГДА ЗаказПоставщику.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаПоИмпортуТоварыВПути)
			ТОГДА ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаПоИмпортуПоступлениеИзТоваровВПути)
		ИНАЧЕ ЗаказПоставщику.ХозяйственнаяОперация 
	КОНЕЦ КАК ХозяйственнаяОперация,
	ЗаказПоставщику.Организация КАК Организация,
	ЗаказПоставщику.Договор КАК Договор,
	ЗаказПоставщику.Склад КАК Склад,
	ЗаказПоставщику.Склад.ЭтоГруппа КАК ЭтоГруппаСкладов,
	ЗаказПоставщику.Валюта КАК Валюта,
	ЕСТЬNULL(ЗаказПоставщику.Соглашение.ВидЦеныПоставщика, ЗНАЧЕНИЕ(Справочник.ВидыЦенПоставщиков.ПустаяСсылка)) КАК ВидЦеныПоставщика
ИЗ
	Документ.ЗаказПоставщику КАК ЗаказПоставщику
ГДЕ
	ЗаказПоставщику.Проведен
	И ЗаказПоставщику.Договор В
			(ВЫБРАТЬ
				ОтборПоДоговорам.Ссылка
			ИЗ
				ОтборПоДоговорам
			ГДЕ
				НЕ ОтборПоДоговорам.ВариантПриемкиТоваров В (&amp;ВариантыПриемкиПоДоговору))
	И (ЗаказПоставщику.Соглашение В
				(ВЫБРАТЬ
					ОтборПоСоглашениям.Ссылка
				ИЗ
					ОтборПоСоглашениям КАК ОтборПоСоглашениям
				ГДЕ
					ОтборПоСоглашениям.ВариантПриемкиТоваров В (&amp;ВариантыПриемкиПоЗаказу))
		ИЛИ ЗаказПоставщику.Соглашение = ЗНАЧЕНИЕ(Справочник.СоглашенияСПоставщиками.ПустаяСсылка)
			И ЗаказПоставщику.ВариантПриемкиТоваров В (&amp;ВариантыПриемкиПоЗаказу, &amp;ВариантыПриемкиПоДоговоруПоЗаказу))
	И (ЗаказПоставщику.Склад В(&amp;Склады)
		ИЛИ &amp;БезОтбораПоСкладу)
	И ЗаказПоставщику.Склад &lt;&gt; ЗНАЧЕНИЕ(Справочник.Склады.ПустаяСсылка)
	И ЗаказПоставщику.ХозяйственнаяОперация В(&amp;ХозяйственныеОперацииДоговора)

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ТИПЗНАЧЕНИЯ(ПриобретениеТоваровУслуг.Ссылка),
	ПриобретениеТоваровУслуг.Ссылка,
	ПриобретениеТоваровУслуг.Номер,
	ПриобретениеТоваровУслуг.Дата,
	ПриобретениеТоваровУслуг.Партнер,
	ПриобретениеТоваровУслуг.Контрагент,
	ПриобретениеТоваровУслуг.Соглашение,
	ВЫБОР
		КОГДА ПриобретениеТоваровУслуг.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаУПоставщикаТоварыВПути)
			ТОГДА ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаУПоставщикаПоступлениеИзТоваровВПути)
		КОГДА ПриобретениеТоваровУслуг.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаУПоставщикаФактуровкаПоставки)
			ТОГДА ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаУПоставщикаНеотфактурованнаяПоставка)
		КОГДА ПриобретениеТоваровУслуг.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаВСтранахЕАЭСТоварыВПути)
			ТОГДА ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаВСтранахЕАЭСПоступлениеИзТоваровВПути)
		КОГДА ПриобретениеТоваровУслуг.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаВСтранахЕАЭСФактуровкаПоставки)
			ТОГДА ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаВСтранахЕАЭСНеотфактурованнаяПоставка)
		КОГДА ПриобретениеТоваровУслуг.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаПоИмпортуТоварыВПути)
			ТОГДА ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаПоИмпортуПоступлениеИзТоваровВПути)
		ИНАЧЕ ПриобретениеТоваровУслуг.ХозяйственнаяОперация
	КОНЕЦ КАК ХозяйственнаяОперация,
	ПриобретениеТоваровУслуг.Организация,
	ПриобретениеТоваровУслуг.Договор,
	ПриобретениеТоваровУслуг.Склад,
	ПриобретениеТоваровУслуг.Склад.ЭтоГруппа,
	ПриобретениеТоваровУслуг.Валюта,
	ЕСТЬNULL(ПриобретениеТоваровУслуг.Соглашение.ВидЦеныПоставщика, ЗНАЧЕНИЕ(Справочник.ВидыЦенПоставщиков.ПустаяСсылка))
ИЗ
	Документ.ПриобретениеТоваровУслуг КАК ПриобретениеТоваровУслуг
ГДЕ
	ПриобретениеТоваровУслуг.Проведен
	И ПриобретениеТоваровУслуг.Договор В
			(ВЫБРАТЬ
				ОтборПоДоговорам.Ссылка
			ИЗ
				ОтборПоДоговорам
			ГДЕ
				НЕ ОтборПоДоговорам.ВариантПриемкиТоваров В (&amp;ВариантыПриемкиПоДоговору))
	И (ПриобретениеТоваровУслуг.ПоступлениеПоЗаказам
			И (ПриобретениеТоваровУслуг.Соглашение В
					(ВЫБРАТЬ
						ОтборПоСоглашениям.Ссылка
					ИЗ
						ОтборПоСоглашениям КАК ОтборПоСоглашениям
					ГДЕ
						ОтборПоСоглашениям.ВариантПриемкиТоваров В (&amp;ВариантыПриемкиПоНакладнаяПоЗаказу))
			ИЛИ ПриобретениеТоваровУслуг.Соглашение = ЗНАЧЕНИЕ(Справочник.СоглашенияСПоставщиками.ПустаяСсылка)
				И &amp;КонстантаВариантПриемки В (&amp;ВариантыПриемкиПоНакладнаяПоЗаказу))
		ИЛИ (НЕ ПриобретениеТоваровУслуг.ПоступлениеПоЗаказам
			И (ПриобретениеТоваровУслуг.Соглашение В
					(ВЫБРАТЬ
						ОтборПоСоглашениям.Ссылка
					ИЗ
						ОтборПоСоглашениям КАК ОтборПоСоглашениям
					ГДЕ
						ОтборПоСоглашениям.ВариантПриемкиТоваров В (&amp;ВариантыПриемкиПоНакладнаяБезЗаказа))
			ИЛИ ПриобретениеТоваровУслуг.Соглашение = ЗНАЧЕНИЕ(Справочник.СоглашенияСПоставщиками.ПустаяСсылка))))
	И (ПриобретениеТоваровУслуг.Склад В (&amp;Склады)
		ИЛИ &amp;БезОтбораПоСкладу)
	И ПриобретениеТоваровУслуг.Склад &lt;&gt; ЗНАЧЕНИЕ(Справочник.Склады.ПустаяСсылка)
	И ПриобретениеТоваровУслуг.ХозяйственнаяОперация В(&amp;ХозяйственныеОперацииДоговора)

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	СоглашенияСПоставщиками.Наименование,
	СоглашенияСПоставщиками.Ссылка,
	СоглашенияСПоставщиками.Номер,
	СоглашенияСПоставщиками.Дата,
	СоглашенияСПоставщиками.Партнер,
	СоглашенияСПоставщиками.Контрагент,
	СоглашенияСПоставщиками.Ссылка,
	СоглашенияСПоставщиками.ХозяйственнаяОперация,
	СоглашенияСПоставщиками.Организация,
	ЗНАЧЕНИЕ(Справочник.ДоговорыКонтрагентов.ПустаяСсылка),
	СоглашенияСПоставщиками.Склад,
	СоглашенияСПоставщиками.Склад.ЭтоГруппа,
	СоглашенияСПоставщиками.Валюта,
	СоглашенияСПоставщиками.ВидЦеныПоставщика
ИЗ
	ОтборПоСоглашениям КАК СоглашенияСПоставщиками
ГДЕ
	СоглашенияСПоставщиками.ВариантПриемкиТоваров В(&amp;ВариантыПриемкиПоСоглашению)
	И НЕ СоглашенияСПоставщиками.ПометкаУдаления

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ПоступлениеПоДоговорам.Наименование,
	ПоступлениеПоДоговорам.Ссылка,
	ПоступлениеПоДоговорам.Номер,
	ПоступлениеПоДоговорам.Дата,
	ПоступлениеПоДоговорам.Партнер,
	ПоступлениеПоДоговорам.Контрагент,
	ВЫБОР
		КОГДА (ЕСТЬNULL(СоглашенияСПоставщиками.ХозяйственнаяОперация, НЕОПРЕДЕЛЕНО) = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаУПоставщика)
					И (ПоступлениеПоДоговорам.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаУПоставщикаПоступлениеИзТоваровВПути)
						ИЛИ ПоступлениеПоДоговорам.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаУПоставщикаНеотфактурованнаяПоставка)))
				ИЛИ (ЕСТЬNULL(СоглашенияСПоставщиками.Ссылка, НЕОПРЕДЕЛЕНО) = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаВСтранахЕАЭС)
					И (ПоступлениеПоДоговорам.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаВСтранахЕАЭСПоступлениеИзТоваровВПути)
						ИЛИ ПоступлениеПоДоговорам.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаВСтранахЕАЭСНеотфактурованнаяПоставка)))
				ИЛИ (ЕСТЬNULL(СоглашенияСПоставщиками.Ссылка, НЕОПРЕДЕЛЕНО) = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаПоИмпорту)
					И ПоступлениеПоДоговорам.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ЗакупкаПоИмпортуПоступлениеИзТоваровВПути))
			ТОГДА ПоступлениеПоДоговорам.Соглашение
		ИНАЧЕ ЗНАЧЕНИЕ(Справочник.СоглашенияСПоставщиками.ПустаяСсылка)
	КОНЕЦ КАК Соглашение,
	ПоступлениеПоДоговорам.ХозяйственнаяОперация,
	ПоступлениеПоДоговорам.Организация,
	ПоступлениеПоДоговорам.Ссылка,
	ПоступлениеПоДоговорам.Склад,
	ПоступлениеПоДоговорам.Склад.ЭтоГруппа,
	ПоступлениеПоДоговорам.Валюта,
	ПоступлениеПоДоговорам.ВидЦеныПоставщика
ИЗ
	ОтборПоДоговорам КАК ПоступлениеПоДоговорам
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.СоглашенияСПоставщиками КАК СоглашенияСПоставщиками
		ПО ПоступлениеПоДоговорам.Соглашение = СоглашенияСПоставщиками.Ссылка
ГДЕ
	ПоступлениеПоДоговорам.ВариантПриемкиТоваров В(&amp;ВариантыПриемкиПоДоговору)
	И НЕ ПоступлениеПоДоговорам.ПометкаУдаления</QueryText>
				<Field xsi:type="dcssch:DataSetFieldField">
					<dcssch:dataPath>ТипЗначения</dcssch:dataPath>
					<dcssch:field>ТипЗначения</dcssch:field>
					<dcssch:title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Тип значения</v8:content>
						</v8:item>
					</dcssch:title>
				</Field>
				<Field xsi:type="dcssch:DataSetFieldField">
					<dcssch:dataPath>Контрагент</dcssch:dataPath>
					<dcssch:field>Контрагент</dcssch:field>
				</Field>
				<Field xsi:type="dcssch:DataSetFieldField">
					<dcssch:dataPath>Организация</dcssch:dataPath>
					<dcssch:field>Организация</dcssch:field>
				</Field>
				<Field xsi:type="dcssch:DataSetFieldField">
					<dcssch:dataPath>Ссылка</dcssch:dataPath>
					<dcssch:field>Ссылка</dcssch:field>
				</Field>
				<Field xsi:type="dcssch:DataSetFieldField">
					<dcssch:dataPath>Соглашение</dcssch:dataPath>
					<dcssch:field>Соглашение</dcssch:field>
				</Field>
				<Field xsi:type="dcssch:DataSetFieldField">
					<dcssch:dataPath>Номер</dcssch:dataPath>
					<dcssch:field>Номер</dcssch:field>
				</Field>
				<Field xsi:type="dcssch:DataSetFieldField">
					<dcssch:dataPath>Дата</dcssch:dataPath>
					<dcssch:field>Дата</dcssch:field>
				</Field>
				<Field xsi:type="dcssch:DataSetFieldField">
					<dcssch:dataPath>Партнер</dcssch:dataPath>
					<dcssch:field>Партнер</dcssch:field>
				</Field>
				<Field xsi:type="dcssch:DataSetFieldField">
					<dcssch:dataPath>ХозяйственнаяОперация</dcssch:dataPath>
					<dcssch:field>ХозяйственнаяОперация</dcssch:field>
					<dcssch:title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Хозяйственная операция</v8:content>
						</v8:item>
					</dcssch:title>
				</Field>
				<Field xsi:type="dcssch:DataSetFieldField">
					<dcssch:dataPath>ЭтоГруппаСкладов</dcssch:dataPath>
					<dcssch:field>ЭтоГруппаСкладов</dcssch:field>
					<dcssch:title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Это группа складов</v8:content>
						</v8:item>
					</dcssch:title>
				</Field>
				<Field xsi:type="dcssch:DataSetFieldField">
					<dcssch:dataPath>Договор</dcssch:dataPath>
					<dcssch:field>Договор</dcssch:field>
				</Field>
				<Field xsi:type="dcssch:DataSetFieldField">
					<dcssch:dataPath>Склад</dcssch:dataPath>
					<dcssch:field>Склад</dcssch:field>
				</Field>
				<Field xsi:type="dcssch:DataSetFieldField">
					<dcssch:dataPath>Валюта</dcssch:dataPath>
					<dcssch:field>Валюта</dcssch:field>
				</Field>
				<Field xsi:type="dcssch:DataSetFieldField">
					<dcssch:dataPath>ВидЦеныПоставщика</dcssch:dataPath>
					<dcssch:field>ВидЦеныПоставщика</dcssch:field>
					<dcssch:title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Вид цены поставщика</v8:content>
						</v8:item>
					</dcssch:title>
				</Field>
				<Parameter>
					<dcssch:name>БезОтбораПоСкладу</dcssch:name>
					<dcssch:title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Без отбора по складу</v8:content>
						</v8:item>
					</dcssch:title>
					<dcssch:valueType>
						<v8:Type>xs:boolean</v8:Type>
					</dcssch:valueType>
					<dcssch:value xsi:type="xs:boolean">false</dcssch:value>
					<dcssch:useRestriction>true</dcssch:useRestriction>
				</Parameter>
				<Parameter>
					<dcssch:name>ВариантыПриемкиПоДоговору</dcssch:name>
					<dcssch:title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Варианты приемки по договору</v8:content>
						</v8:item>
					</dcssch:title>
					<dcssch:valueType>
						<v8:Type>cfg:EnumRef.ВариантыПриемкиТоваров</v8:Type>
					</dcssch:valueType>
					<dcssch:value xsi:nil="true"/>
					<dcssch:useRestriction>true</dcssch:useRestriction>
					<dcssch:valueListAllowed>true</dcssch:valueListAllowed>
				</Parameter>
				<Parameter>
					<dcssch:name>ВариантыПриемкиПоДоговоруПоЗаказу</dcssch:name>
					<dcssch:title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Варианты приемки по договору по заказу</v8:content>
						</v8:item>
					</dcssch:title>
					<dcssch:valueType>
						<v8:Type>cfg:EnumRef.ВариантыПриемкиТоваров</v8:Type>
					</dcssch:valueType>
					<dcssch:value xsi:nil="true"/>
					<dcssch:useRestriction>true</dcssch:useRestriction>
					<dcssch:valueListAllowed>true</dcssch:valueListAllowed>
				</Parameter>
				<Parameter>
					<dcssch:name>ВариантыПриемкиПоЗаказу</dcssch:name>
					<dcssch:title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Варианты приемки по заказу</v8:content>
						</v8:item>
					</dcssch:title>
					<dcssch:valueType>
						<v8:Type>cfg:EnumRef.ВариантыПриемкиТоваров</v8:Type>
					</dcssch:valueType>
					<dcssch:value xsi:nil="true"/>
					<dcssch:useRestriction>true</dcssch:useRestriction>
					<dcssch:valueListAllowed>true</dcssch:valueListAllowed>
				</Parameter>
				<Parameter>
					<dcssch:name>ВариантыПриемкиПоНакладнаяБезЗаказа</dcssch:name>
					<dcssch:title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Варианты приемки по накладная без заказа</v8:content>
						</v8:item>
					</dcssch:title>
					<dcssch:valueType>
						<v8:Type>cfg:EnumRef.ВариантыПриемкиТоваров</v8:Type>
					</dcssch:valueType>
					<dcssch:value xsi:nil="true"/>
					<dcssch:useRestriction>true</dcssch:useRestriction>
					<dcssch:valueListAllowed>true</dcssch:valueListAllowed>
				</Parameter>
				<Parameter>
					<dcssch:name>ВариантыПриемкиПоНакладнаяПоЗаказу</dcssch:name>
					<dcssch:title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Варианты приемки по накладная по заказу</v8:content>
						</v8:item>
					</dcssch:title>
					<dcssch:valueType>
						<v8:Type>cfg:EnumRef.ВариантыПриемкиТоваров</v8:Type>
					</dcssch:valueType>
					<dcssch:value xsi:nil="true"/>
					<dcssch:useRestriction>true</dcssch:useRestriction>
					<dcssch:valueListAllowed>true</dcssch:valueListAllowed>
				</Parameter>
				<Parameter>
					<dcssch:name>ВариантыПриемкиПоСоглашению</dcssch:name>
					<dcssch:title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Варианты приемки по соглашению</v8:content>
						</v8:item>
					</dcssch:title>
					<dcssch:valueType>
						<v8:Type>cfg:EnumRef.ВариантыПриемкиТоваров</v8:Type>
					</dcssch:valueType>
					<dcssch:value xsi:nil="true"/>
					<dcssch:useRestriction>true</dcssch:useRestriction>
					<dcssch:valueListAllowed>true</dcssch:valueListAllowed>
				</Parameter>
				<Parameter>
					<dcssch:name>Договор</dcssch:name>
					<dcssch:title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Договор</v8:content>
						</v8:item>
					</dcssch:title>
					<dcssch:valueType>
						<v8:Type>cfg:CatalogRef.ДоговорыКонтрагентов</v8:Type>
					</dcssch:valueType>
					<dcssch:value xsi:nil="true"/>
					<dcssch:useRestriction>true</dcssch:useRestriction>
				</Parameter>
				<Parameter>
					<dcssch:name>КонстантаВариантПриемки</dcssch:name>
					<dcssch:title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Константа вариант приемки</v8:content>
						</v8:item>
					</dcssch:title>
					<dcssch:value xsi:nil="true"/>
					<dcssch:useRestriction>true</dcssch:useRestriction>
				</Parameter>
				<Parameter>
					<dcssch:name>Контрагент</dcssch:name>
					<dcssch:title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Контрагент</v8:content>
						</v8:item>
					</dcssch:title>
					<dcssch:valueType>
						<v8:Type>cfg:CatalogRef.Контрагенты</v8:Type>
					</dcssch:valueType>
					<dcssch:value xsi:nil="true"/>
					<dcssch:useRestriction>true</dcssch:useRestriction>
				</Parameter>
				<Parameter>
					<dcssch:name>Организация</dcssch:name>
					<dcssch:title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Организация</v8:content>
						</v8:item>
					</dcssch:title>
					<dcssch:valueType>
						<v8:Type>cfg:CatalogRef.Организации</v8:Type>
					</dcssch:valueType>
					<dcssch:value xsi:nil="true"/>
					<dcssch:useRestriction>true</dcssch:useRestriction>
				</Parameter>
				<Parameter>
					<dcssch:name>Партнер</dcssch:name>
					<dcssch:title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Партнер</v8:content>
						</v8:item>
					</dcssch:title>
					<dcssch:valueType>
						<v8:Type>cfg:CatalogRef.Партнеры</v8:Type>
					</dcssch:valueType>
					<dcssch:value xsi:nil="true"/>
					<dcssch:useRestriction>true</dcssch:useRestriction>
				</Parameter>
				<Parameter>
					<dcssch:name>Склады</dcssch:name>
					<dcssch:title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Склады</v8:content>
						</v8:item>
					</dcssch:title>
					<dcssch:valueType>
						<v8:Type>cfg:CatalogRef.Склады</v8:Type>
					</dcssch:valueType>
					<dcssch:value xsi:nil="true"/>
					<dcssch:useRestriction>true</dcssch:useRestriction>
					<dcssch:valueListAllowed>true</dcssch:valueListAllowed>
				</Parameter>
				<Parameter>
					<dcssch:name>Соглашение</dcssch:name>
					<dcssch:title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Соглашение</v8:content>
						</v8:item>
					</dcssch:title>
					<dcssch:valueType>
						<v8:Type>cfg:CatalogRef.СоглашенияСПоставщиками</v8:Type>
					</dcssch:valueType>
					<dcssch:value xsi:nil="true"/>
					<dcssch:useRestriction>true</dcssch:useRestriction>
				</Parameter>
				<Parameter>
					<dcssch:name>ХозяйственныеОперацииДоговора</dcssch:name>
					<dcssch:title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Хозяйственные операции договора</v8:content>
						</v8:item>
					</dcssch:title>
					<dcssch:valueType>
						<v8:Type>cfg:EnumRef.ХозяйственныеОперации</v8:Type>
					</dcssch:valueType>
					<dcssch:value xsi:nil="true"/>
					<dcssch:useRestriction>true</dcssch:useRestriction>
					<dcssch:valueListAllowed>true</dcssch:valueListAllowed>
				</Parameter>
				<Parameter>
					<dcssch:name>ХозяйственныеОперацииСоглашения</dcssch:name>
					<dcssch:title xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Хозяйственные операции соглашения</v8:content>
						</v8:item>
					</dcssch:title>
					<dcssch:valueType>
						<v8:Type>cfg:EnumRef.ХозяйственныеОперации</v8:Type>
					</dcssch:valueType>
					<dcssch:value xsi:nil="true"/>
					<dcssch:useRestriction>true</dcssch:useRestriction>
					<dcssch:valueListAllowed>true</dcssch:valueListAllowed>
				</Parameter>
				<ListSettings>
					<dcsset:filter>
						<dcsset:viewMode>Normal</dcsset:viewMode>
						<dcsset:userSettingID>dfcece9d-5077-440b-b6b3-45a5cb4538eb</dcsset:userSettingID>
					</dcsset:filter>
					<dcsset:order>
						<dcsset:viewMode>Normal</dcsset:viewMode>
						<dcsset:userSettingID>88619765-ccb3-46c6-ac52-38e9c992ebd4</dcsset:userSettingID>
					</dcsset:order>
					<dcsset:conditionalAppearance>
						<dcsset:viewMode>Normal</dcsset:viewMode>
						<dcsset:userSettingID>b75fecce-942b-4aed-abc9-e6a02e460fb3</dcsset:userSettingID>
					</dcsset:conditionalAppearance>
					<dcsset:itemsViewMode>Normal</dcsset:itemsViewMode>
					<dcsset:itemsUserSettingID>911b6018-f537-43e8-a417-da56b22f9aec</dcsset:itemsUserSettingID>
				</ListSettings>
			</Settings>
		</Attribute>
	</Attributes>
	<Commands>
		<Command name="Выбрать" id="1">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Выбрать</v8:content>
				</v8:item>
			</Title>
			<ToolTip>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Выбрать</v8:content>
				</v8:item>
			</ToolTip>
			<Picture>
				<xr:Ref>StdPicture.ChooseValue</xr:Ref>
				<xr:LoadTransparent>true</xr:LoadTransparent>
			</Picture>
			<Action>Выбрать</Action>
			<Representation>TextPicture</Representation>
			<CurrentRowUse>DontUse</CurrentRowUse>
		</Command>
	</Commands>
	<Parameters>
		<Parameter name="Организация">
			<Type>
				<v8:Type>cfg:CatalogRef.Организации</v8:Type>
			</Type>
		</Parameter>
		<Parameter name="Партнер">
			<Type>
				<v8:Type>cfg:CatalogRef.Партнеры</v8:Type>
			</Type>
		</Parameter>
		<Parameter name="Контрагент">
			<Type>
				<v8:Type>cfg:CatalogRef.Контрагенты</v8:Type>
			</Type>
		</Parameter>
		<Parameter name="Склад">
			<Type>
				<v8:Type>cfg:CatalogRef.Склады</v8:Type>
			</Type>
		</Parameter>
		<Parameter name="Договор">
			<Type>
				<v8:Type>cfg:CatalogRef.ДоговорыКонтрагентов</v8:Type>
			</Type>
		</Parameter>
		<Parameter name="Соглашение">
			<Type>
				<v8:Type>cfg:CatalogRef.СоглашенияСПоставщиками</v8:Type>
			</Type>
		</Parameter>
		<Parameter name="ХозяйственнаяОперация">
			<Type>
				<v8:Type>cfg:EnumRef.ХозяйственныеОперации</v8:Type>
			</Type>
		</Parameter>
	</Parameters>
</Form>

#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	тз = Документы.КорректировкаЗадолженности.ДопРасходыПоВозвратамПоставщику(Параметры.Организация, Параметры.Контрагент);
	ДопРасходы.Загрузить(тз);
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийДопРасходы

&НаКлиенте
Процедура ДопРасходыВыборПриИзменении(Элемент)

	ВыбраннаяВалюта = Элементы.ДопРасходы.ТекущиеДанные.Валюта;
	Для Каждого Расход Из ДопРасходы Цикл
		Если Расход.Выбор И Расход.Валюта <> ВыбраннаяВалюта Тогда
			Элементы.ДопРасходы.ТекущиеДанные.Выбор = Ложь;
		КонецЕсли;
	КонецЦикла;

КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКоманд

&НаКлиенте
Процедура ПеренестиДокументы(Команда)
	
	Результат = Новый Массив;
	Для Каждого Расход Из ДопРасходы Цикл
		Если Расход.Выбор Тогда
			НоваяСтрока = Новый Структура("ДокументВозврата,Претензия,СуммаДопРасходов");
			ЗаполнитьЗначенияСвойств(НоваяСтрока, Расход);
			Результат.Добавить(НоваяСтрока);
		КонецЕсли;
	КонецЦикла;
	Закрыть(Результат);
	
КонецПроцедуры

#КонецОбласти

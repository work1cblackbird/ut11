#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)

	// Пропускаем инициализацию, чтобы гарантировать получение формы при передаче параметра "АвтоТест".
	Если Параметры.Свойство("АвтоТест") Тогда
		Возврат;
	КонецЕсли;
	
	Если Параметры.ВзаимодействиеОснование.Пустая() Тогда
		
		Отказ = Истина;
		Возврат;
		
	КонецЕсли;
	
	// Если нет права доступа к подсистеме "Взаимодействия" то показывать нечего.
	Если Не ПравоДоступа("Просмотр", Метаданные.ЖурналыДокументов.Взаимодействия) Тогда
		ОбщегоНазначенияКлиентСервер.СообщитьПользователю(НСтр("ru = 'У вас нет прав на просмотр отчета по созданным документам рассылки.'"));
		Отказ = Истина;
		Возврат;
	КонецЕсли;
	
	ВзаимодействиеОснование = Параметры.ВзаимодействиеОснование;

	ОбщегоНазначенияКлиентСервер.УстановитьПараметрДинамическогоСписка(
	          Список,
	          "ВзаимодействиеОснование",
	          ВзаимодействиеОснование);
	
	УправлениеВидимостью();
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийШапкиФормы

&НаКлиенте
Процедура СписокПередНачаломДобавления(Элемент, Отказ, Копирование, Родитель, Группа, Параметр)
	
	Отказ = Истина;
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура УправлениеВидимостью()

	ПредназначенаДляЭлектронныхПисем      = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(ВзаимодействиеОснование, "ПредназначенаДляЭлектронныхПисем");
	Элементы.ПолученоОтправлено.Видимость = ПредназначенаДляЭлектронныхПисем;
	Элементы.ЕстьВложения.Видимость       = ПредназначенаДляЭлектронныхПисем;

КонецПроцедуры 


#КонецОбласти

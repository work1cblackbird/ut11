#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура СформироватьПараметрыОтчета(ПараметрКоманды, ИмяОтчета, ПараметрыФормы)
	
	РеквизитыДокумента = Документы.ОтчетПоКомиссииМеждуОрганизациями.РеквизитыДокумента(ПараметрКоманды);
	Если РеквизитыДокумента.РасчетыЧерезОтдельногоКонтрагента Тогда
		ИмяОтчета = "РасчетыСПартнерами";
		ПараметрыФормы.Отбор = Новый Структура("Заказ", ПараметрКоманды);
		ПараметрыФормы.КлючНазначенияИспользования = "ЗаказКлиента";
		ПараметрыФормы.КлючВарианта = "РасчетыСПартнерами";
	Иначе
		ИмяОтчета = "РасчетыМеждуОрганизациями";
		ПараметрыФормы.Отбор = Новый Структура("ДокументРасчетов", ПараметрКоманды);
		ПараметрыФормы.КлючНазначенияИспользования = "Документ";
		ПараметрыФормы.КлючВарианта = "РасчетыПоПродажам";
	КонецЕсли;
	
КонецПроцедуры // СформироватьПараметрыОтчета()

&НаКлиенте
Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	
	Перем ИмяОтчета;
	
	ПараметрыФормы = Новый Структура("Отбор, ФиксированныеНастройки, КлючНазначенияИспользования, КлючВарианта, СформироватьПриОткрытии");
	ПараметрыФормы.СформироватьПриОткрытии = Истина;
	
	СформироватьПараметрыОтчета(ПараметрКоманды, ИмяОтчета, ПараметрыФормы);
		
	ОткрытьФорму("Отчет." + ИмяОтчета + ".Форма",
		ПараметрыФормы,
		ПараметрыВыполненияКоманды.Источник,
		ПараметрыВыполненияКоманды.Уникальность,
		ПараметрыВыполненияКоманды.Окно);
	
КонецПроцедуры // ОбработкаКоманды()

#КонецОбласти

#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Параметры.Свойство("ФормаОплаты", ФормаОплаты);
	Параметры.Свойство("СуммаКОплате", СуммаКОплате);
	Параметры.Свойство("Валюта", Валюта);
	
	ДоступныеСпособыОплаты = Неопределено;
	Параметры.Свойство("ДоступныеСпособыОплаты", ДоступныеСпособыОплаты);
	
	ОбновитьДанныеФормы();
	УстановитьВидимость(ДоступныеСпособыОплаты);
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура ВыбратьСпособОплаты(Команда)
	
	Кнопка = ТекущийЭлемент;
	
	Если Кнопка = Элементы.КнопкаБанковскаяКарта Тогда
		СпособОплаты = "БанковскаяКарта";
	ИначеЕсли Кнопка = Элементы.КнопкаНаличные Тогда
		СпособОплаты = "Наличные";
	ИначеЕсли Кнопка = Элементы.КнопкаЯндексКасса Тогда
		СпособОплаты = "ЯндексКасса";
	КонецЕсли;
	
	ОбработатьВыбор(СпособОплаты);
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура ОбновитьДанныеФормы()
	
	Модуль = Обработки.МобильноеРабочееМестоСборкиИКурьерскойДоставки;
	СуммаКОплатеПредставление = Модуль.СуммаКОплатеПредставление(ЭтаФорма);
	ФормаОплатыПредставление = Модуль.ФормаОплатыПредставление(ЭтаФорма);
	
	Элементы.ДекорацияСуммаКОплате.Заголовок = Новый ФорматированнаяСтрока(СуммаКОплатеПредставление,
		ШрифтыСтиля.ШрифтТекстаУвеличенныйВыделенныйСборкаИДоставка,
		ЦветаСтиля.ЦветТекстаОсновнойСборкаИДоставка);
		
	Элементы.ДекорацияСпособОплаты.Заголовок = Новый ФорматированнаяСтрока(ФормаОплатыПредставление,
		ШрифтыСтиля.ШрифтТекстаСборкаИДоставка,
		ЦветаСтиля.ЦветТекстаОсновнойСборкаИДоставка);
	
КонецПроцедуры

&НаСервере
Процедура УстановитьВидимость(ДоступныеСпособыОплаты)
	
	Элементы.ГруппаНаличные.Видимость = (ДоступныеСпособыОплаты.НайтиПоЗначению("Наличные") <> Неопределено);
	Элементы.РамкаНаличные.Видимость = Элементы.ГруппаНаличные.Видимость;
	Элементы.ГруппаБанковскаяКарта.Видимость = (ДоступныеСпособыОплаты.НайтиПоЗначению("ПлатежнойКартой") <> Неопределено);
	Элементы.РамкаБанковскаяКарта.Видимость = Элементы.ГруппаБанковскаяКарта.Видимость;
//++ Локализация	
	Элементы.ГруппаЯндексКасса.Видимость = (ДоступныеСпособыОплаты.НайтиПоЗначению("ЯндексКасса") <> Неопределено);
	Элементы.РамкаЯндексКасса.Видимость = Элементы.ГруппаЯндексКасса.Видимость;
//-- Локализация
	
КонецПроцедуры

&НаКлиенте
Процедура ОбработатьВыбор(СпособОплаты)
	
	СтандартнаяОбработка = Ложь;
	Закрыть(СпособОплаты);
	
КонецПроцедуры

#КонецОбласти


#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	Если Параметры.Свойство("АвтоТест") Тогда // Возврат при получении формы для анализа.
		Возврат;
	КонецЕсли;
КонецПроцедуры

&НаКлиенте
Процедура Создать(Команда)
	
	ОчиститьСообщения();
	
	Если ПроверитьЗаполнение() Тогда
		НовыйСценарий = СоздатьНаСервере();
		
		ПараметрыОповещения = Новый Структура("НовыйСценарий", НовыйСценарий);
		Оповестить("СозданиеСценарияПрогнозирования", ПараметрыОповещения, ВладелецФормы);
		Закрыть();
	КонецЕсли;
	
КонецПроцедуры

&НаСервере
Функция СоздатьНаСервере()
	
	НовыйСценарий = Справочники.СценарииТоварногоПланирования.СоздатьЭлемент();
	НовыйСценарий.Наименование = Наименование;
	НовыйСценарий.Периодичность = Периодичность;
	НовыйСценарий.Записать();
	
	Возврат НовыйСценарий.Ссылка;
	
КонецФункции

&НаКлиенте
Процедура Отмена(Команда)
	Закрыть();
КонецПроцедуры

#КонецОбласти

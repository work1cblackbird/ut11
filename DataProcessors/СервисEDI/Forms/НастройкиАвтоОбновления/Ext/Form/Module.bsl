
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	ЗаполнитьЗначенияСвойств(ЭтотОбъект,
	                         Параметры, 
	                         "АвтоматическиОбновлять, ПериодАвтообновления");
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовШапкиФормы

&НаКлиенте
Процедура АвтоматическиОбновлятьПриИзменении(Элемент)
	
	УправлениеДоступностью();
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура КомандаОк(Команда)
	
	Отказ = Ложь;
	
	ПроверитьЗаполнениеДанных(Отказ);
	
	Если Отказ Тогда
		Возврат;
	КонецЕсли;
	
	Закрыть(ПараметрыАвтообновленияФормы());
	
КонецПроцедуры

&НаКлиенте
Процедура КомандаОтмена(Команда)
	
	Закрыть(Неопределено);
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаКлиенте
Процедура УправлениеДоступностью()
	
	Элементы.ПериодАвтообновления.Доступность = АвтоматическиОбновлять;
	
КонецПроцедуры

&НаКлиенте
Функция ПараметрыАвтообновленияФормы()
	
	ПараметрыАвтообновленияФормы = Новый Структура;
	ПараметрыАвтообновленияФормы.Вставить("АвтоматическиОбновлять", АвтоматическиОбновлять);
	ПараметрыАвтообновленияФормы.Вставить("ПериодАвтообновления", ПериодАвтообновления);
	
	Если Не ПараметрыАвтообновленияФормы.АвтоматическиОбновлять Тогда
		ПараметрыАвтообновленияФормы.ПериодАвтообновления = 0;
	КонецЕсли;
	
	Возврат ПараметрыАвтообновленияФормы;
	
КонецФункции

&НаКлиенте
Процедура ПроверитьЗаполнениеДанных(Отказ)
	
	Если АвтоматическиОбновлять
		И ПериодАвтообновления = 0 Тогда
		
		ОбщегоНазначенияКлиент.СообщитьПользователю(НСтр("ru = 'Не указан период автоматического обновления'"),, "ПериодАвтообновления",, Отказ);
		
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти


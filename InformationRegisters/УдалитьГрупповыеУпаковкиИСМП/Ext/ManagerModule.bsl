#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область СлужебныйПрограммныйИнтерфейс

// Возвращает известные коэффициенты для групповых упаковок
// 
// Параметры:
//  Номенклатура - Массив Из ОпределяемыйТип.Номенклатура - номенклатура упаковок
// Возвращаемое значение:
//  Соответствие - коэффициенты групповых упаковок (ключ - номенклатура, значение - коэффициент)
Функция КоэффициентыГрупповыхУпаковок(Знач Номенклатура) Экспорт
	
	Результат = Новый Соответствие;
	
	Запрос = Новый Запрос;
	Запрос.УстановитьПараметр("Номенклатура", Номенклатура);
	Запрос.текст = 
	"ВЫБРАТЬ
	|	ГрупповыеУпаковкиИСМП.Номенклатура КАК Номенклатура,
	|	ГрупповыеУпаковкиИСМП.Коэффициент  КАК Коэффициент
	|ИЗ
	|	РегистрСведений.УдалитьГрупповыеУпаковкиИСМП КАК ГрупповыеУпаковкиИСМП
	|ГДЕ
	|	ГрупповыеУпаковкиИСМП.Номенклатура В (&Номенклатура)";
	
	Выборка = Запрос.Выполнить().Выбрать();
	Пока Выборка.Следующий() Цикл
		
		Результат.Вставить(Выборка.Номенклатура, Выборка.Коэффициент);
		
	КонецЦикла;
	
	Возврат Результат;
	
КонецФункции

Процедура СохранитьКоэффициентУпаковки(Знач Номенклатура, Знач Коэффициент) Экспорт
	
	УстановитьПривилегированныйРежим(Истина);
	
	МенеджерЗаписи = РегистрыСведений.УдалитьГрупповыеУпаковкиИСМП.СоздатьМенеджерЗаписи();
	МенеджерЗаписи.Номенклатура = Номенклатура;
	МенеджерЗаписи.Коэффициент = Коэффициент;
	
	МенеджерЗаписи.Записать();
	
КонецПроцедуры

#КонецОбласти

#КонецЕсли
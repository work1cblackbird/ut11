
#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ОбработчикиСобытий

Процедура ПередЗаписью(Отказ, Замещение)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	Для каждого ТекущаяЗапись Из ЭтотОбъект Цикл
		
		Если ТекущаяЗапись.ПубликоватьОстатки
			И Не ЗначениеЗаполнено(ТекущаяЗапись.ВариантПубликацииОстатков) Тогда
			
			ВариантыПубликацииОстатков = ТорговыеПредложения.НастройкиПодсистемы().ВариантыПубликацииОстатков;
			
			Если ЗначениеЗаполнено(ВариантыПубликацииОстатков) Тогда
				ТекущаяЗапись.ВариантПубликацииОстатков = ВариантыПубликацииОстатков[0];
			КонецЕсли;
			
		ИначеЕсли Не ТекущаяЗапись.ПубликоватьОстатки Тогда	
			ТекущаяЗапись.ВариантПубликацииОстатков = Перечисления.ВариантыПубликацииОстатковТорговыеПредложения.ПустаяСсылка();
		КонецЕсли;
		
	КонецЦикла;
	
КонецПроцедуры

#КонецОбласти

#КонецЕсли

#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	Если Параметры.Свойство("Отбор") И Параметры.Отбор.Свойство("Договор") Тогда
		Договор = Параметры.Отбор.Договор; // СправочникСсылка.ДоговорыКонтрагентов, СправочникСсылка.ДоговорыМеждуОрганизациями
		Если ЗначениеЗаполнено(Договор) Тогда
			РеквизитыДоговора = ОбщегоНазначения.ЗначенияРеквизитовОбъекта(Договор, "Организация, ВалютаВзаиморасчетов");
			ВалютаРеглУчета = ЗначениеНастроекПовтИсп.ВалютаРегламентированногоУчетаОрганизации(РеквизитыДоговора.Организация);
			Элементы.КурсЧислитель.Заголовок = Строка(ВалютаРеглУчета);
			Элементы.КурсЗнаменатель.Заголовок = Строка(РеквизитыДоговора.ВалютаВзаиморасчетов);
		КонецЕсли;
	КонецЕсли;
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовШапкиФормы

&НаКлиенте
Процедура ДоговорНажатие(Элемент, СтандартнаяОбработка)
	ПараметрыОткрытия = Новый Структура("Ключ", Договор);
	Если ТипЗнч(Договор) = Тип("СправочникСсылка.ДоговорыМеждуОрганизациями") Тогда
		ОткрытьФорму("Справочник.ДоговорыМеждуОрганизациями.ФормаОбъекта", ПараметрыОткрытия);
	Иначе
		ОткрытьФорму("Справочник.ДоговорыКонтрагентов.ФормаОбъекта", ПараметрыОткрытия);
	КонецЕсли;
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовТаблицыФормыСписок

&НаКлиенте
Процедура СписокПередНачаломДобавления(Элемент, Отказ, Копирование, Родитель, Группа, Параметр)
	Параметр = Договор;
КонецПроцедуры

#КонецОбласти


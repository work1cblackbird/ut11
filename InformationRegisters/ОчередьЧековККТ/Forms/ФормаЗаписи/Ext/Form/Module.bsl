#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("АвтоТест") Тогда // Возврат при получении формы для анализа.
		Возврат;
	КонецЕсли;
	
	ФискальнаяОперации = Неопределено;
	Реквизиты = РаспределеннаяФискализация.ДанныеЧекаВОчереди(Запись.ИдентификаторЗаписи);
	Если Реквизиты <> Неопределено Тогда
		Если Реквизиты.СтатусЧека = Перечисления.СтатусЧекаККТВОчереди.Фискализирован Тогда
			ФискальнаяОперации = ОборудованиеЧекопечатающиеУстройства.ДанныеФискальнойОперации(Реквизиты.ДокументОснование, Реквизиты.ИдентификаторЗаписи);
		КонецЕсли;
		ШиринаЧека = 42;
		Шаблон = ШаблоныФискальныхДокументов.ШаблонКассовыйЧек(ШиринаЧека, Реквизиты.ДанныеЧека, ФискальнаяОперации);
		ШаблоныФискальныхДокументов.СформироватьДокументПоШаблону(Шаблон);
		QRКод = ШаблоныФискальныхДокументов.ВывестиКакТабличныйДокумент(Шаблон);
	КонецЕсли;
	
	Элементы.ТекстОшибки.Видимость = Запись.СтатусЧека = Перечисления.СтатусЧекаККТВОчереди.Ошибка;
	
КонецПроцедуры

#КонецОбласти 

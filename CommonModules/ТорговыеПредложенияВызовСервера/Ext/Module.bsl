////////////////////////////////////////////////////////////////////////////////
// Подсистема "Торговые предложения".
// ОбщийМодуль.ТорговыеПредложенияВызовСервера.
////////////////////////////////////////////////////////////////////////////////

#Область СлужебныйПрограммныйИнтерфейс

// См. ТорговыеПредложенияСлужебный.СсылкаФидаПрайсЛиста
//
Функция СсылкаФидаПрайсЛиста(ПрайсЛист, Обновить = Ложь) Экспорт
	Возврат ТорговыеПредложенияСлужебный.СсылкаФидаПрайсЛиста(ПрайсЛист, Обновить);	
КонецФункции

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

#Область СервисРекомендаций

Функция ОтразитьОткликНаРекомендацию(Знач Организация, Знач УникальныйИдентификатор, Знач АдресРесурса) Экспорт
	
	Результат = ТорговыеПредложенияСлужебный.ОтразитьОткликНаРекомендациюАсинхронно(
		Организация, УникальныйИдентификатор, АдресРесурса);
	
	Возврат Результат;
	
КонецФункции

Функция ДеактивироватьРекомендацию(Знач Организация, Знач УникальныйИдентификатор, Знач АдресРесурса) Экспорт
	
	Результат = ТорговыеПредложенияСлужебный.ДеактивироватьРекомендациюАсинхронно(
		Организация, УникальныйИдентификатор, АдресРесурса);
	
	Возврат Результат;
	
КонецФункции

#КонецОбласти

#Область РаботаСКорзиной

// Выполнить действие с товаром корзины в фоне.
// 
// Параметры:
//  ПараметрыМетода - Структура
//  УникальныйИдентификатор - Строка
// 
// Возвращаемое значение:
//  см. ДлительныеОперации.ВыполнитьВФоне
//
Функция ВыполнитьДействиеСТоваромКорзиныВФоне(Знач ПараметрыМетода, Знач УникальныйИдентификатор) Экспорт
	
	ДлительнаяОперация = ТорговыеПредложенияСлужебный.ВыполнитьДействиеСТоваромКорзиныВФоне(ПараметрыМетода, УникальныйИдентификатор);
	
	Возврат ДлительнаяОперация;
	
КонецФункции

Функция УдалитьКорзинуВФоне(Знач ПараметрыМетода, Знач УникальныйИдентификатор) Экспорт
	
	Результат = ТорговыеПредложенияСлужебный.УдалитьКорзинуВФоне(ПараметрыМетода, УникальныйИдентификатор);
	
	Возврат Результат;
	
КонецФункции

// Создать корзину добавить товар в фоне.
// 
// Параметры:
//  Организация - ОпределяемыйТип.Организация
//  ДанныеПредложений - см. ТорговыеПредложенияСлужебныйКлиент.НовыйПараметрыПредложения
//  УникальныйИдентификатор - Строка
// 
// Возвращаемое значение:
//  см. ДлительныеОперации.ВыполнитьВФоне
//
Функция СоздатьКорзинуДобавитьТоварВФоне(
	Знач Организация, Знач ДанныеПредложений, Знач УникальныйИдентификатор) Экспорт
	
	ДлительнаяОперация = ТорговыеПредложенияСлужебный.СоздатьКорзинуДобавитьТоварВФоне(
		Организация, ДанныеПредложений, УникальныйИдентификатор);
	Возврат ДлительнаяОперация;
	
КонецФункции

#КонецОбласти

#Область РаботаСКатегориями

Функция ПолучитьКатегорииТорговыхПредложенийВФоне(Знач УникальныйИдентификатор) Экспорт
	
	Результат = ТорговыеПредложенияСлужебный.ПолучитьКатегорииТорговыхПредложенийВФоне(УникальныйИдентификатор);
	
	Возврат Результат;
	
КонецФункции

// См. ТорговыеПредложенияСлужебный.ПолучитьХарактеристикиКатегорииВФоне
Функция ПолучитьХарактеристикиКатегорииВФоне(
		Знач ПараметрыЗапроса, Знач УникальныйИдентификатор, Знач ИдентификаторЗадания) Экспорт 
	
	Возврат ТорговыеПредложенияСлужебный.ПолучитьХарактеристикиКатегорииВФоне(
		ПараметрыЗапроса, УникальныйИдентификатор, ИдентификаторЗадания);
	
КонецФункции

#КонецОбласти

#Область Синхронизация

Функция ОбновитьСтатистикуСинхронизацииВФоне(Знач УникальныйИдентификатор, Знач ПараметрыПроцедуры) Экспорт
	
	НаименованиеЗадания = НСтр("ru = 'Торговые предложения. Обновление статистики синхронизации.'");
	ИмяПроцедуры        = "ТорговыеПредложенияСлужебный.ОбновитьСтатистикуСинхронизации";
	
	ПараметрыВыполнения = ДлительныеОперации.ПараметрыВыполненияВФоне(УникальныйИдентификатор);
	ПараметрыВыполнения.НаименованиеФоновогоЗадания = НаименованиеЗадания;
	ПараметрыВыполнения.ОжидатьЗавершение = 0;
	ПараметрыВыполнения.ЗапуститьВФоне = Истина;
	
	Возврат ДлительныеОперации.ВыполнитьВФоне(ИмяПроцедуры, ПараметрыПроцедуры, ПараметрыВыполнения);
	
КонецФункции

Функция ВыполнитьСинхронизациюТорговыхПредложенийВФоне(
		Знач ДлительнаяОперация, Знач ПрайсЛист = Неопределено) Экспорт 
	
	Результат = ТорговыеПредложенияСлужебный.ВыполнитьСинхронизациюТорговыхПредложенийВФоне(
		ДлительнаяОперация, ПрайсЛист);
	Возврат Результат;
	
КонецФункции

Функция НайтиДлительнуюОперациюСинхронизацииТорговыхПредложений(Знач ДлительнаяОперация) Экспорт
	
	ТорговыеПредложенияСлужебный.НайтиДлительнуюОперациюСинхронизацииТорговыхПредложений(ДлительнаяОперация);
	Возврат ДлительнаяОперация;
	
КонецФункции

#КонецОбласти

// Отменяет фоновое задание публикации, и записывает сведения в РС СостоянияСинхронизацииТорговыеПредложения.
// 
// Параметры:
//  ДлительнаяОперация - Структура - Длительная операция
// 
// Возвращаемое значение:
//  Структура
//
Функция ОтменитьФоновоеЗадание(Знач ДлительнаяОперация) Экспорт 
	ТорговыеПредложенияСлужебный.ОтменитьФоновоеЗадание(ДлительнаяОперация);
	Возврат ДлительнаяОперация;
КонецФункции

// См. РегистрыСведений.ТорговыеПредложенияТорговойПлощадки.ПубликуемаяНоменклатураТорговыхПредложений
//
Функция ПубликуемаяНоменклатураТорговыхПредложений() Экспорт
	
	Результат = ТорговыеПредложенияСлужебный.ПубликуемаяНоменклатураТорговыхПредложений();
	Возврат Результат;
	
КонецФункции

#КонецОбласти
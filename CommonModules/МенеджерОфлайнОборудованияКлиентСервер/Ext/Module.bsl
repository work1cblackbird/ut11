#Область СлужебныйПрограммныйИнтерфейс

#Область СтруктурыДанныхККМОфлайн

// Возвращает доступные версии форматов обмена.
//
// Возвращаемое значение:
//  СписокЗначений.
Функция ДоступныеВерсииФорматовОбмена() Экспорт
	
	ВерсииФорматовОбмена = Новый СписокЗначений();
	ВерсииФорматовОбмена.Добавить(1005, "1.5");
	ВерсииФорматовОбмена.Добавить(1006, "1.6");
	ВерсииФорматовОбмена.Добавить(1007, "1.7");
	ВерсииФорматовОбмена.Добавить(2003, "2.3");
	ВерсииФорматовОбмена.Добавить(3000, "3.0");
	ВерсииФорматовОбмена.Добавить(3001, "3.1");
	ВерсииФорматовОбмена.Добавить(3002, "3.2");
	ВерсииФорматовОбмена.Добавить(3003, "3.3");
	
	Возврат ВерсииФорматовОбмена;
	
КонецФункции

// АПК: 299-выкл 
// Доступные версии форматов обмена ED.
// 
// Возвращаемое значение:
//  СписокЗначений - Доступные версии форматов обмена ED
Функция ДоступныеВерсииФорматовОбменаED() Экспорт
	
	ВерсииФорматовОбмена = Новый СписокЗначений();
	ВерсииФорматовОбмена.Добавить("1.8", "1.8");
	
	Возврат ВерсииФорматовОбмена;
	
КонецФункции
// АПК: 299-вкл 

// Настройки ККМ.
// 
// Возвращаемое значение:
//  Структура - Настройки ККМ:
// * НаименованиеОрганизации - Строка -
// * НаименованиеМагазина - Строка -
// * СистемыНалогообложения - Массив Из Число-
// * ИНН - Строка -
// * КПП - Строка -
// * АдресТочкиПродажи - Строка -
// * МестоТочкиПродажи - Строка -
// * ВидыЭлектроннойОплаты - Массив из см. МенеджерОфлайнОборудования.ЗаписьВидЭлектроннойОплаты
// * ЭлектроннаяПочтаОтправителяЧека - Строка -
Функция НастройкиККМ() Экспорт
	
	НастройкиККМ = Новый Структура;
	НастройкиККМ.Вставить("НаименованиеОрганизации", "");
	НастройкиККМ.Вставить("НаименованиеМагазина", "");
	НастройкиККМ.Вставить("СистемыНалогообложения", Новый Массив);
	НастройкиККМ.Вставить("ИНН", "");
	НастройкиККМ.Вставить("КПП", "");
	НастройкиККМ.Вставить("АдресТочкиПродажи", "");
	НастройкиККМ.Вставить("МестоТочкиПродажи", "");
	НастройкиККМ.Вставить("ВидыЭлектроннойОплаты", Новый Массив);
	НастройкиККМ.Вставить("ЭлектроннаяПочтаОтправителяЧека", "");
	
	Возврат НастройкиККМ;
	
КонецФункции

// Прайс лист ККМ.
// 
// Возвращаемое значение:
//  Структура:
//   * Товары - Массив из см. МенеджерОфлайнОборудования.ЗаписьТовараПрайсЛиста -
//   * ЕдиницыИзмерения - Массив из см. МенеджерОфлайнОборудования.ЗаписьЕдиницыИзмеренияПрайсЛиста -
//   * ГруппыТоваров - Массив из см. МенеджерОфлайнОборудования.ЗаписьГруппыТоваровПрайсЛиста -
//   * ДанныеПоставщиков - Массив из см. МенеджерОфлайнОборудования.ЗаписьДанныхПоставщикаПрайсЛиста -
//   * ДанныеАгентов - Массив из см. МенеджерОфлайнОборудования.ЗаписьДанныхАгентаПрайсЛиста -
Функция ПрайсЛистККМ() Экспорт
	
	ПрайсЛист = Новый Структура;
	
	ПрайсЛист.Вставить("Товары", 			Новый Массив);
	ПрайсЛист.Вставить("ЕдиницыИзмерения", 	Новый Массив);
	ПрайсЛист.Вставить("ГруппыТоваров", 	Новый Массив);
	ПрайсЛист.Вставить("ДанныеПоставщиков", Новый Массив);
	ПрайсЛист.Вставить("ДанныеАгентов", 	Новый Массив);
	
	Возврат ПрайсЛист;
	
КонецФункции

// Заказы ККМ.
// 
// Возвращаемое значение:
//  Массив из см. МенеджерОфлайнОборудования.ЗаписьЗаказа- Заказы ККМ
Функция ЗаказыККМ() Экспорт
	
	ЗаказыККМ = Новый Массив;
	
	Возврат ЗаказыККМ;
	
КонецФункции

// Загружаемые данные из ККМ.
// 
// Возвращаемое значение:
//  Структура - Загружаемые данные из ККМ:
// * ОтчетыОПродажах - Массив из см. МенеджерОфлайнОборудованияКлиентСервер.ОтчетОПродажахККМ -
// * ВскрытияАлкогольнойТары - Массив из см. МенеджерОфлайнОборудованияКлиентСервер.ВскрытиеТарыККМ -
Функция ЗагружаемыеДанныеИзККМ() Экспорт
	
	ЗагружаемыеДанные = Новый Структура;
	
	ЗагружаемыеДанные.Вставить("ОтчетыОПродажах", Новый Массив);
	ЗагружаемыеДанные.Вставить("ВскрытияАлкогольнойТары", Новый Массив);
	
	Возврат ЗагружаемыеДанные;
	
КонецФункции

// Загружаемые данные из прайс чекера.
// 
// Возвращаемое значение:
//  Структура - Загружаемые данные из прайс чекера:
// * ОтчетыОПроверкахЦенников - Массив из см. МенеджерОфлайнОборудованияКлиентСервер.ОтчетОЦенниках -
Функция ЗагружаемыеДанныеИзПрайсЧекера() Экспорт
	
	ЗагружаемыеДанные = Новый Структура;
	
	ЗагружаемыеДанные.Вставить("ОтчетыОПроверкахЦенников", Новый Массив);
	
	Возврат ЗагружаемыеДанные;
	
КонецФункции

// Отчет о продажах ККМ.
// 
// Возвращаемое значение:
//  Структура - Отчет о продажах ККМ:
// * НомерСмены - Число - номер смены ккм.
// * ДатаОткрытияСмены - Строка - дата открытия смены.
// * ДатаЗакрытияСмены - Строка - дата закрытия смены.
// * Чеки - Массив из см. МенеджерОфлайнОборудованияКлиентСервер.ЧекККМ - массив чеков ккм.
// * ДвиженияДС - Массив из см. МенеджерОфлайнОборудованияКлиентСервер.ДвижениеДСККМ - массив движений чека ккм.
// * УникальныйИдентификатор - УникальныйИдентификатор - уникальный идентификатор смены.
// * СтатусСмены - ПеречислениеСсылка.СтатусыКассовойСмены - статус смены ККМ.
Функция ОтчетОПродажахККМ() Экспорт
	
	ОтчетОПродажахККМ = Новый Структура;
	
	ОтчетОПродажахККМ.Вставить("НомерСмены");
	ОтчетОПродажахККМ.Вставить("ДатаОткрытияСмены");
	ОтчетОПродажахККМ.Вставить("ДатаЗакрытияСмены");
	ОтчетОПродажахККМ.Вставить("Чеки", Новый Массив);
	ОтчетОПродажахККМ.Вставить("ДвиженияДС", Новый Массив);
	ОтчетОПродажахККМ.Вставить("УникальныйИдентификатор");
	ОтчетОПродажахККМ.Вставить("СтатусСмены", ПредопределенноеЗначение("Перечисление.СтатусыКассовойСмены.Закрыта"));
	
	Возврат ОтчетОПродажахККМ;
	
КонецФункции

// Чек ККМ.
// 
// Возвращаемое значение:
//  Структура - Чек ККМ:
// * ДатаЧека - строка - дата чека.
// * НомерЧека - Число - номер чека ккм.
// * УникальныйИдентификатор - УникальныйИдентификатор - уникальный идентификатор чека.
// * СистемаНалогообложения - ПеречислениеСсылка.ТипыСистемНалогообложенияККТ - тип системы налогообложения.
// * ТипСвязанногоДокументаККМ - ПеречислениеСсылка.ТипыФискальныхДокументовККТ - тип связанного документа.
// * УникальныйИдентификаторСвязанногоДокументаККМ - УникальныйИдентификатор - уникальный идентификатор связанного чека.
// * ТипРасчета - ПеречислениеСсылка.ТипыРасчетаДенежнымиСредствами - тип расчета денежными средствами.
// * Товары - Массив из см. МенеджерОфлайнОборудованияКлиентСервер.ТоварЧекаККМ - товары чека ккм.
// * Оплаты - Массив из см. МенеджерОфлайнОборудованияКлиентСервер.ОплатаЧекаККМ- оплаты чека ккм.
Функция ЧекККМ() Экспорт
	
	Чек = Новый Структура;
	
	Чек.Вставить("ДатаЧека");
	Чек.Вставить("НомерЧека");
	Чек.Вставить("УникальныйИдентификатор");
	Чек.Вставить("СистемаНалогообложения", ПредопределенноеЗначение("Перечисление.ТипыСистемНалогообложенияККТ.ПустаяСсылка"));
	Чек.Вставить("ТипСвязанногоДокументаККМ");
	Чек.Вставить("УникальныйИдентификаторСвязанногоДокументаККМ");
	Чек.Вставить("ТипРасчета", ПредопределенноеЗначение("Перечисление.ТипыРасчетаДенежнымиСредствами.ПустаяСсылка"));
	Чек.Вставить("Товары", Новый Массив);
	Чек.Вставить("Оплаты", Новый Массив);
	Чек.Вставить("ЭтоЧекКоррекции", Ложь);
	Чек.Вставить("ДанныеКоррекции", ДанныеКоррекцииЧекаККМ());
	
	Возврат Чек;
	
КонецФункции

// Товар чека ККМ.
// 
// Возвращаемое значение:
//  Структура - Товар чека ККМ:
// * Код - Число.
// * Цена - Число.
// * Сумма - Число.
// * Количество - Число.
// * ШтрихкодыМаркированнойПродукции - Массив из см. МенеджерОфлайнОборудования.ЗаписьШтрихкодаПрайсЛиста.
// * СтавкаНДС - Число
// 			   - Строка.
// * ПризнакСпособаРасчета - ПеречислениеСсылка.ПризнакиСпособаРасчета.
// * УникальныйИдентификаторНоменклатуры - УникальныйИдентификатор.
// * УникальныйИдентификаторХарактеристики - УникальныйИдентификатор.
// * УникальныйИдентификаторУпаковки - УникальныйИдентификатор.
Функция ТоварЧекаККМ() Экспорт
	
	СтруктураЗаписи = Новый Структура;
	
	СтруктураЗаписи.Вставить("Код");
	СтруктураЗаписи.Вставить("Наименование");
	СтруктураЗаписи.Вставить("Цена");
	СтруктураЗаписи.Вставить("Сумма");
	СтруктураЗаписи.Вставить("Количество");
	СтруктураЗаписи.Вставить("ШтрихкодыМаркированнойПродукции", Новый Массив);
	СтруктураЗаписи.Вставить("СтавкаНДС");
	СтруктураЗаписи.Вставить("ПризнакСпособаРасчета");
	СтруктураЗаписи.Вставить("ПризнакПредметаРасчета");
	СтруктураЗаписи.Вставить("УникальныйИдентификаторНоменклатуры");
	СтруктураЗаписи.Вставить("УникальныйИдентификаторХарактеристики");
	СтруктураЗаписи.Вставить("УникальныйИдентификаторУпаковки");
	СтруктураЗаписи.Вставить("МераКоличестваПредметаРасчета", ДанныеМерыКоличестваПредметаРасчета());
	СтруктураЗаписи.Вставить("КодПредметаРасчета", ДанныеКодаПредметаРасчета()); 
	СтруктураЗаписи.Вставить("ДанныеАгента", ДанныеАгентаПоставщика());
	СтруктураЗаписи.Вставить("ДанныеПоставщика", ДанныеАгентаПоставщика());
	
	Возврат СтруктураЗаписи;
	
КонецФункции

// Оплата чека ККМ.
// 
// Возвращаемое значение:
//  Структура - Оплата чека ККМ:
// * СуммаНаличнойОплаты - Число -
// * СуммаЭлектроннойОплаты - Число -
// * СуммаПредоплатой - Число -
// * СуммаПостоплатой - Число -
// * СуммаВстречнымПредоставлением - Число -
// * КодВидаЭлектроннойОплаты - Число.
// * УникальныйИдентификаторВидаЭлектроннойОплаты - УникальныйИдентификатор.
Функция ОплатаЧекаККМ() Экспорт
	
	СтруктураЗаписи = Новый Структура;
	
	СтруктураЗаписи.Вставить("СуммаНаличнойОплаты", 0);
	СтруктураЗаписи.Вставить("СуммаЭлектроннойОплаты", 0);
	СтруктураЗаписи.Вставить("СуммаПредоплатой", 0);
	СтруктураЗаписи.Вставить("СуммаПостоплатой", 0);
	СтруктураЗаписи.Вставить("СуммаВстречнымПредоставлением", 0);
	СтруктураЗаписи.Вставить("КодВидаЭлектроннойОплаты");
	СтруктураЗаписи.Вставить("УникальныйИдентификаторВидаЭлектроннойОплаты");
	
	Возврат СтруктураЗаписи;
	
КонецФункции

// Движение ДСККМ.
// 
// Возвращаемое значение:
//  Структура - Движение ДСККМ:
// * Дата - Дата.
// * Номер - Число.
// * УникальныйИдентификатор - УникальныйИдентификатор. 
// * Сумма - Число.
// * ТипДвижения - Строка.
Функция ДвижениеДСККМ() Экспорт
	
	СтруктураЗаписи = Новый Структура;
	
	СтруктураЗаписи.Вставить("Дата");
	СтруктураЗаписи.Вставить("Номер");
	СтруктураЗаписи.Вставить("УникальныйИдентификатор");
	СтруктураЗаписи.Вставить("Сумма");
	СтруктураЗаписи.Вставить("ТипДвижения");
	
	Возврат СтруктураЗаписи;
	
КонецФункции

// Вскрытие тары ККМ.
// 
// Возвращаемое значение:
//  Структура - Вскрытие тары ККМ:
// * Дата - Дата.
// * Номер - Число.
// * УникальныйИдентификатор - УникальныйИдентификатор.
// * Товары - Массив из см. МенеджерОфлайнОборудования.ЗаписьТовараПрайсЛиста.
Функция ВскрытиеТарыККМ() Экспорт
	
	ВскрытиеТары = Новый Структура;
	
	ВскрытиеТары.Вставить("Дата");
	ВскрытиеТары.Вставить("Номер");
	ВскрытиеТары.Вставить("УникальныйИдентификатор");
	ВскрытиеТары.Вставить("Товары", Новый Массив);
	ВскрытиеТары.Вставить("НомерДокумента");
	ВскрытиеТары.Вставить("ПостановкаНаКран", Неопределено);
	
	Возврат ВскрытиеТары;
	
КонецФункции

// Товар вскрытия тары ККМ.
// 
// Возвращаемое значение:
//  Структура - Товар вскрытия тары ККМ:
// * Код - Число.
// * Количество - Число.
// * ШтрихкодАлкогольнойПродукции - Массив из см. МенеджерОфлайнОборудования.ЗаписьШтрихкодаПрайсЛиста.
// * УникальныйИдентификаторНоменклатуры - УникальныйИдентификатор.
// * УникальныйИдентификаторХарактеристики - УникальныйИдентификатор.
// * УникальныйИдентификаторУпаковки - УникальныйИдентификатор.
Функция ТоварВскрытияТарыККМ() Экспорт
	
	СтруктураЗаписи = Новый Структура;
	
	СтруктураЗаписи.Вставить("Код");
	СтруктураЗаписи.Вставить("Количество");
	СтруктураЗаписи.Вставить("ШтрихкодАлкогольнойПродукции", Новый Массив);
	СтруктураЗаписи.Вставить("УникальныйИдентификаторНоменклатуры");
	СтруктураЗаписи.Вставить("УникальныйИдентификаторХарактеристики");
	СтруктураЗаписи.Вставить("УникальныйИдентификаторУпаковки");
	
	Возврат СтруктураЗаписи;
	
КонецФункции

// Отчет о ценниках.
// 
// Возвращаемое значение:
//  Структура - Отчет о ценниках:
// * Дата - Дата.
// * Номер - Число.
// * УникальныйИдентификатор - УникальныйИдентификатор.
// * Товары - Массив из см. МенеджерОфлайнОборудования.ЗаписьТовараПрайсЛиста
Функция ОтчетОЦенниках() Экспорт
	
	СтруктураЗаписи = Новый Структура;
	
	СтруктураЗаписи.Вставить("Дата");
	СтруктураЗаписи.Вставить("Номер");
	СтруктураЗаписи.Вставить("УникальныйИдентификатор");
	СтруктураЗаписи.Вставить("Товары", Новый Массив);
	
	Возврат СтруктураЗаписи;
	
КонецФункции

// Товар отчета о ценниках.
// 
// Возвращаемое значение:
//  Структура - Товар отчета о ценниках:
// * Код - Число.
// * Штрихкод - Строка.
// * УникальныйИдентификаторНоменклатуры - УникальныйИдентификатор.
// * УникальныйИдентификаторХарактеристики - УникальныйИдентификатор.
// * УникальныйИдентификаторУпаковки - УникальныйИдентификатор.
Функция ТоварОтчетаОЦенниках() Экспорт
	
	СтруктураЗаписи = Новый Структура;
	
	СтруктураЗаписи.Вставить("Код");
	СтруктураЗаписи.Вставить("Штрихкод");
	СтруктураЗаписи.Вставить("УникальныйИдентификаторНоменклатуры");
	СтруктураЗаписи.Вставить("УникальныйИдентификаторХарактеристики");
	СтруктураЗаписи.Вставить("УникальныйИдентификаторУпаковки");
	
	Возврат СтруктураЗаписи;
	
КонецФункции

// Набор выгруженных данных.
// 
// Возвращаемое значение:
//  Структура - Набор выгруженных данных:
// * Настройки - Булево.
// * ПрайсЛист - Булево.
// * Заказы - Булево.
Функция НаборВыгруженныхДанных() Экспорт
	
	СтруктураЗаписи = Новый Структура;
	
	СтруктураЗаписи.Вставить("Настройки", Ложь);
	СтруктураЗаписи.Вставить("ПрайсЛист", Ложь);
	СтруктураЗаписи.Вставить("Заказы", Ложь);
	
	Возврат СтруктураЗаписи;
	
КонецФункции

// Функция возвращает разделитель RS.
//
// Возвращаемое значение:
//  Строка.
//
Функция РазделительRS() Экспорт;
	
	Возврат Символ(30); // Dec 30
	
КонецФункции

// Функция возвращает экранированный символ RS.
//
// Возвращаемое значение:
//  Строка.
//
Функция ЭкранированныйСимволRS() Экспорт;
	
	Возврат "\x1e"; // Используется для экранирования символа RS.
	
КонецФункции  

// Функция возвращает разделитель EOT.
//
// Возвращаемое значение:
//  Строка.
//
Функция РазделительEOT() Экспорт;
	
	Возврат Символ(4); // Dec 4
	
КонецФункции

// Функция возвращает экранированный символ EOT.
//
// Возвращаемое значение:
//  Строка.
//
Функция ЭкранированныйСимволEOT() Экспорт;
	
	Возврат "\x4"; // Используется для экранирования символа EOT.
	
КонецФункции

// Данные коррекции Чека ККМ
// 
// Возвращаемое значение:
//  Структура
//
Функция ДанныеКоррекцииЧекаККМ() Экспорт
	
	ДанныеКоррекции = Новый Структура;
	
	ДанныеКоррекции.Вставить("ДатаКорректируемогоРасчета");
	ДанныеКоррекции.Вставить("НомерПредписания");
	ДанныеКоррекции.Вставить("ТипКоррекции");
	ДанныеКоррекции.Вставить("ФискальныйНомер");
	
	Возврат ДанныеКоррекции;
	
КонецФункции

// Данные меры расчета Товара Чека ККМ
// 
// Возвращаемое значение:
//  Структура
//
Функция ДанныеМерыКоличестваПредметаРасчета() Экспорт
	
	ДанныеМерыКоличестваПредметаРасчета = Новый Структура;
	
	ДанныеМерыКоличестваПредметаРасчета.Вставить("МераКоличестваПредметаРасчета", ПредопределенноеЗначение("Перечисление.МераКоличестваПредметаРасчетаККТ.ПустаяСсылка"));
	ДанныеМерыКоличестваПредметаРасчета.Вставить("Значение");
	
	Возврат ДанныеМерыКоличестваПредметаРасчета;
	
КонецФункции 

// Данные меры расчета Товара Чека ККМ
// 
// Возвращаемое значение:
//  Структура
//
Функция ДанныеКодаПредметаРасчета() Экспорт
	
	ДанныеКодаПредметаРасчета = Новый Структура;
	
	ДанныеКодаПредметаРасчета.Вставить("ТипКода");
	ДанныеКодаПредметаРасчета.Вставить("Значение");
	
	Возврат ДанныеКодаПредметаРасчета;
	
КонецФункции

Функция ДанныеАгентаПоставщика() Экспорт
	
	ДанныеАгентаПоставщика = Новый Структура;
	
	ДанныеАгентаПоставщика.Вставить("ИНН");
	ДанныеАгентаПоставщика.Вставить("Наименование");
	
	Возврат ДанныеАгентаПоставщика;
	
КонецФункции

Функция ДанныеОборотовКассовойСмены() Экспорт
	
	ОборотыКассовойСмены = Новый Структура;
	
	ОборотыКассовойСмены.Вставить("НомерСмены");
	ОборотыКассовойСмены.Вставить("ДатаОткрытияСмены");
	ОборотыКассовойСмены.Вставить("ДатаЗакрытияСмены");
	ОборотыКассовойСмены.Вставить("КоличествоЧеков");
	ОборотыКассовойСмены.Вставить("СуммаПрихода");
	ОборотыКассовойСмены.Вставить("СуммаВозвратаПрихода");
	ОборотыКассовойСмены.Вставить("СуммаРасхода");
	ОборотыКассовойСмены.Вставить("СуммаВозвратаРасхода");
	ОборотыКассовойСмены.Вставить("СуммаНаличными");
	ОборотыКассовойСмены.Вставить("СуммаЭлектронными");
	ОборотыКассовойСмены.Вставить("СуммаПредоплатами");
	ОборотыКассовойСмены.Вставить("СуммаПостоплатами"); 
	
	Возврат ОборотыКассовойСмены;
	
КонецФункции

Функция ЧекКассовойСменыОФД() Экспорт
	
	ЧекКассовойСменыОФД = Новый Структура;
	
	ЧекКассовойСменыОФД.Вставить("ДатаЧека");
	ЧекКассовойСменыОФД.Вставить("НомерЧекаЗаСмену");
	ЧекКассовойСменыОФД.Вставить("ПризнакРасчета");
	ЧекКассовойСменыОФД.Вставить("СуммаНаличными");
	ЧекКассовойСменыОФД.Вставить("СуммаЭлектронными");
	ЧекКассовойСменыОФД.Вставить("СуммаПредоплатами");
	ЧекКассовойСменыОФД.Вставить("СуммаПостоплатами");
	
	Возврат ЧекКассовойСменыОФД;
	
КонецФункции


#КонецОбласти

#КонецОбласти


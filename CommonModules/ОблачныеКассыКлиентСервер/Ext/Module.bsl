///////////////////////////////////////////////////////////////////////////////////////////////////////
// Copyright (c) 2024, ООО 1С-Софт
// Все права защищены. Эта программа и сопроводительные материалы предоставляются 
// в соответствии с условиями лицензии Attribution 4.0 International (CC BY 4.0)
// Текст лицензии доступен по ссылке:
// https://creativecommons.org/licenses/by/4.0/legalcode
///////////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Подсистема "ИнтернетПоддержкаПользователей.ОблачныеКассы".
// ОбщийМодуль.ОблачныеКассыКлиентСервер.
//
// Клиент-серверные процедуры общего назначения:
//  - статусы резальутатов выполнения операций;
//  - инициализация параметров подключения;
//  - инициализация параметров аутентификации;
//  - типы поддерживаемых способов аутентификации.
//
////////////////////////////////////////////////////////////////////////////////

#Область ПрограммныйИнтерфейс

#Область СтатусыОпераций

// Возвращает статус операции "Выполнена".
//
// Возвращаемое значение:
//  Строка - код состояния.
//
Функция СтатусОперацииВыполнена() Экспорт
	
	Возврат "Выполнена";
	
КонецФункции

// Возвращает статус операции "Отменена".
//
// Возвращаемое значение:
//  Строка - код состояния.
//
Функция СтатусОперацииОтменена() Экспорт
	
	Возврат "Отменена";
	
КонецФункции

// Возвращает статус операции "Выполняется".
//
// Возвращаемое значение:
//  Строка - код состояния.
//
Функция СтатусОперацииВыполняется() Экспорт
	
	Возврат "Выполняется";
	
КонецФункции

#КонецОбласти

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

#Область ПараметрыПодключения

// Описание параметров подключения к Облачной кассе.
//
// Возвращаемое значение:
//  Структура:
//    * НастройкаПодключения - СправочникСсылка.НастройкиПодключенияКОблачнымКассам - настройка подключения к сервису
//        участникаов Облачных касс. В сценариях создания нового подключения параметра не заполнен.
//    * Идентификатор - Строка - идентификатор Облачной кассы.
//    * ПараметрыАутентификации - Неопределено - тип аутентификации не заполнен.
//                              - см. НовыйПараметрыАутентификацииBasic
//                              - см. НовыйПараметрыАутентификацииBearer
//                              - см. НовыйПараметрыАутентификацииSalesRegisterGroup
//
Функция НовыйПараметрыПодключения() Экспорт
	
	ПараметрыАутентификации = Неопределено;	// Неопределено, см. НовыйПараметрыАутентификацииBasic, см. НовыйПараметрыАутентификацииBearer, см. НовыйПараметрыАутентификацииSalesRegisterGroup
	
	Результат = Новый Структура();
	Результат.Вставить(
		"НастройкаПодключения",
		ПредопределенноеЗначение("Справочник.НастройкиПодключенияКОблачнымКассам.ПустаяСсылка"));
	Результат.Вставить("Идентификатор"          , "");
	Результат.Вставить("ПараметрыАутентификации", ПараметрыАутентификации);
	
	Возврат Результат;
	
КонецФункции

#КонецОбласти

#Область ПараметрыАутентификации

// Формирует объект параметров аутентификации Basic.
//
// Возвращаемое значение:
//  Структура:
//    * ТипАутентификации - Строка - тип аутентификации Basic.
//    * Логин - Строка
//    * Пароль - Строка
//
Функция НовыйПараметрыАутентификацииBasic() Экспорт
	
	Результат = Новый Структура();
	Результат.Вставить("ТипАутентификации", ТипАутентификацииBasic());
	Результат.Вставить("Логин"            , "");
	Результат.Вставить("Пароль"           , "");
	
	Возврат Результат;
	
КонецФункции

// Формирует объект параметров аутентификации Bearer.
//
// Возвращаемое значение:
//  Структура:
//    * ТипАутентификации - Строка - тип аутентификации Bearer.
//    * Токен - Строка
//
Функция НовыйПараметрыАутентификацииBearer() Экспорт
	
	Результат = Новый Структура();
	Результат.Вставить("ТипАутентификации", ТипАутентификацииBearer());
	Результат.Вставить("Токен"            , "");
	
	Возврат Результат;
	
КонецФункции

// Формирует объект параметров аутентификации особого формат Sales Register Group.
// Процесс аутентификации работает по принципу Resource owner password credentials grant.
//
// Возвращаемое значение:
//  Структура:
//    * ТипАутентификации - Строка - тип аутентификации Sales Register Group.
//    * ИдентификаторМагазина - Строка
//    * ИдентификаторГруппыКасс - Строка
//    * СекретныйКлючМагазина - Строка
//    * Токен - Строка
//    * ТокенТип - Строка
//    * ТокенДатаИстечения - Число - универсальная дата в миллисекунда срока жизни токена доступа.
//
Функция НовыйПараметрыАутентификацииSalesRegisterGroup() Экспорт
	
	Результат = Новый Структура();
	Результат.Вставить("ТипАутентификации"      , ТипАутентификацииSalesRegisterGroup());
	Результат.Вставить("ИдентификаторМагазина"  , "");
	Результат.Вставить("ИдентификаторГруппыКасс", "");
	Результат.Вставить("СекретныйКлючМагазина"  , "");
	
	// Данные токена
	Результат.Вставить("Токен"             , "");
	Результат.Вставить("ТокенТип"          , "");
	Результат.Вставить("ТокенДатаИстечения", 0);
	
	Возврат Результат;
	
КонецФункции

#КонецОбласти

#Область ТипыАутентификации

// Возвращает тип аутентификации "BASIC".
//
// Возвращаемое значение:
//  Строка
//
Функция ТипАутентификацииBasic() Экспорт
	
	Возврат "BASIC";
	
КонецФункции

// Возвращает тип аутентификации "BEARER".
//
// Возвращаемое значение:
//  Строка
//
Функция ТипАутентификацииBearer() Экспорт
	
	Возврат "BEARER";
	
КонецФункции

// Возвращает тип аутентификации "SALESREGISTERGROUP".
//
// Возвращаемое значение:
//  Строка
//
Функция ТипАутентификацииSalesRegisterGroup() Экспорт
	
	Возврат "SALESREGISTERGROUP";
	
КонецФункции

#КонецОбласти

#КонецОбласти
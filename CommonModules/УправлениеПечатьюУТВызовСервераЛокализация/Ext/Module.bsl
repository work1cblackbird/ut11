
#Область ПрограммныйИнтерфейс

#Область Км3

// Проверяет проведенность и статус "Пробит" документов для печати ИНВ3
//
// Параметры:
//  Идентификатор	- Строка - Идентификатор команды печати,
//  ОбъектыПечати	- Массив - массив ссылок на объекты для печати.
// 
// Возвращаемое значение:
//  Структура - структура параметров с ключами:
//		*КоличествоЧеков	- Число - Количество проведенных и пробитых чеков,
//		*КоличествоОтчетов	- Число - Количество проведенных отчетов.
//
Функция ПроверитьПроведенностьИСтатусПробитДокументовДляПечатиИНВ3(Идентификатор, ОбъектыПечати) Экспорт
	
	Результат = Новый Массив;
	
	Запрос = Новый Запрос;
	Запрос.Текст =
	"ВЫБРАТЬ
	|	СУММА(ВложенныйЗапрос.КоличествоЧеков) КАК КоличествоЧеков,
	|	СУММА(ВложенныйЗапрос.КоличествоОтчетов) КАК КоличествоОтчетов
	|ИЗ
	|	(ВЫБРАТЬ
	|		КОЛИЧЕСТВО(Документ.Ссылка) КАК КоличествоЧеков,
	|		0 КАК КоличествоОтчетов
	|	ИЗ
	|		Документ.ЧекККМВозврат КАК Документ
	|	ГДЕ
	|		Документ.Ссылка В(&МассивДокументов)
	|		И (НЕ Документ.Проведен
	|			ИЛИ НЕ Документ.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыЧековККМ.Пробит))
	|	
	|	ОБЪЕДИНИТЬ ВСЕ
	|	
	|	ВЫБРАТЬ
	|		КОЛИЧЕСТВО(Документ.Ссылка) КАК КоличествоЧеков,
	|		0 КАК КоличествоОтчетов
	|	ИЗ
	|		Документ.ВозвратПодарочныхСертификатов КАК Документ
	|	ГДЕ
	|		Документ.Ссылка В(&МассивДокументов)
	|		И (НЕ Документ.Проведен
	|			ИЛИ НЕ Документ.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыЧековККМ.Пробит))
	|	
	|	ОБЪЕДИНИТЬ ВСЕ
	|	
	|	ВЫБРАТЬ
	|		0,
	|		КОЛИЧЕСТВО(Документ.Ссылка)
	|	ИЗ
	|		Документ.ОтчетОРозничныхПродажах КАК Документ
	|	ГДЕ
	|		Документ.Ссылка В(&МассивДокументов)
	|		И НЕ Документ.Проведен) КАК ВложенныйЗапрос";
		
	Запрос.УстановитьПараметр("МассивДокументов", ОбъектыПечати);
	
	УстановитьПривилегированныйРежим(Истина);
	Выборка = Запрос.Выполнить().Выбрать();
	УстановитьПривилегированныйРежим(Ложь);
	
	Выборка.Выбрать();
	ВозвращаемоеЗначение = Новый Структура("КоличествоЧеков, КоличествоОтчетов", 0, 0);
	Если Выборка.Следующий() Тогда
		ВозвращаемоеЗначение.КоличествоЧеков   = Выборка.КоличествоЧеков;
		ВозвращаемоеЗначение.КоличествоОтчетов = Выборка.КоличествоОтчетов;
	КонецЕсли;
	
	Возврат ВозвращаемоеЗначение;

КонецФункции

#КонецОбласти

#Область ТТН

// См. Документы.ТранспортнаяНакладная.ПроверитьДокументыОснования.
//
// Параметры:
//  МассивОбъектов - Массив - массив документов для печати
// 
// Возвращаемое значение:
//  Структура - См. Документы.ТранспортнаяНакладная.ПроверитьДокументыОснования.
//
Функция ПроверитьДокументыОснования(МассивОбъектов) Экспорт
	Возврат Документы.ТранспортнаяНакладная.ПроверитьДокументыОснования(МассивОбъектов);
КонецФункции

// См. Документы.ТранспортнаяНакладная.СоздатьТранспортныеНакладные
//
// Параметры:
//  МассивОбъектов - Массив - массив документов для печати
//  ОбъектыПоКоторымНакладныеУжеСозданы - Массив - массив документов покоторым уже созданы накладные
//  
// Возвращаемое значение:
//  Массив - из ДокументСсылка.ТранспортнаяНакладная
//
Функция СоздатьТранспортныеНакладные(МассивОбъектов, ОбъектыПоКоторымНакладныеУжеСозданы = Неопределено) Экспорт
	Возврат Документы.ТранспортнаяНакладная.СоздатьТранспортныеНакладные(МассивОбъектов,,,ОбъектыПоКоторымНакладныеУжеСозданы);
КонецФункции

#КонецОбласти

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

//++ Локализация

#Область ЭтикеткиИЦенники

// Возвращает данные для печати акцизных марок.
//
// Параметры:
//  Идентификатор	 - Строка - Идентификатор команды печати,
//  ОбъектыПечати	- Массив - массив ссылок ДокументСсылка.ЗапросАкцизныхМарокЕГАИС.
// 
// Возвращаемое значение:
//   - Строка	-	адрес структуры во временном хранилище, содержащей данные для печати.
//
Функция ДанныеДляПечатиАкцизныхМарок(Идентификатор, ОбъектыПечати) Экспорт
	
	Возврат ПечатьЭтикетокИЦенниковЛокализация.ДанныеДляПечатиАкцизныхМарок(ОбъектыПечати);
	
КонецФункции

// Возвращает данные для печати штрихкодов упаковок.
//
// Параметры:
//	 Идентификатор   - Строка - Идентификатор команды печати.
//	 ОбъектыПечати   - Массив - Массив ссылок СправочникСсылка.ШтрихкодыУпаковокТоваров.
//	                          - Массив структур-свойств штрихкодов, не записанных в базу данных, свойства структур:
//	                             *ТипУпаковки  - ПеречислениеСсылка.ТипыУпаковок - обязательное заполнение.
//	                             *ТипШтрихкода - ПеречислениеСсылка.ТипыШтрихкодов - обязательное заполнение.
//	                             *ЗначениеШтрихкода - Строка - сгенерированный штрихкод (в формате с заключенными
//	                              в скобки ключами идентификаторов применения) - обязательное заполнение.
//	                             *Номенклатура - СправочникСсылка.Номенклатура.
//	                             *Характеристика - СправочникСсылка.ХарактеристикаНоменклатуры.
//	
// Возвращаемое значение:
//	  - Строка	-	адрес структуры во временном хранилище, содержащей данные для печати
//
Функция ДанныеДляПечатиШтрихкодовУпаковок(Идентификатор, ОбъектыПечати) Экспорт
	
	Возврат ПечатьЭтикетокИЦенниковЛокализация.ДанныеДляПечатиШтрихкодовУпаковок(ОбъектыПечати);
	
КонецФункции

#КонецОбласти

#КонецОбласти

//-- Локализация

#Область Инв3_Инв19

#КонецОбласти

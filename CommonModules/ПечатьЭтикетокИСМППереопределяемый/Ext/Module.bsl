#Область ПрограммныйИнтерфейс

// Подготавливает структуру дополнительных параметров для печати этикеток.
// 
// Параметры:
// 	СтруктураНастроекИтог - Структура - дополнительные параметры.
//
Процедура СтруктураНастроекЭтикеткаИСМП(СтруктураНастроекИтог) Экспорт
	
	//++ НЕ ГОСИС
	СтруктураНастроек = Обработки.ПечатьЭтикетокИЦенников.СтруктураНастроек();
	СтруктураНастроек.ОбязательныеПоля.Добавить("Номенклатура");
	Если ПолучитьФункциональнуюОпцию("ИспользоватьХарактеристикиНоменклатуры") Тогда
		СтруктураНастроек.ОбязательныеПоля.Добавить("Характеристика");
	КонецЕсли;
	СтруктураНастроек.ОбязательныеПоля.Добавить("ШаблонЭтикетки");
	СтруктураНастроек.ОбязательныеПоля.Добавить("Количество");
	СтруктураНастроек.ОбязательныеПоля.Добавить("НомерВГруппе");
	СтруктураНастроек.ОбязательныеПоля.Добавить("СодержимоеКоличество");
	СтруктураНастроек.ОбязательныеПоля.Добавить("ПредставлениеНоменклатуры");
	СтруктураНастроек.ОбязательныеПоля.Добавить("КодМаркировки");
	СтруктураНастроек.ОбязательныеПоля.Добавить("GTIN");
	
	Для Каждого КлючИЗначение Из СтруктураНастроек Цикл
		СтруктураНастроекИтог.Вставить(КлючИЗначение.Ключ, КлючИЗначение.Значение);
	КонецЦикла;
	//-- НЕ ГОСИС
	Возврат;
	
КонецПроцедуры

// В данной процедуре определяется метод печати этикеток ИС МП
// 
// Параметры:
// 	ТаблицаДляПечати - ТаблицаЗначений - Описание:
// 	 * Номенклатура - ОпределяемыйТип.Номенклатура - Номенклатура.
// 	 * Характеристика - ОпределяемыйТип.ХарактеристикаНоменклатуры - Характеристика.
// 	 * GTIN - ОпределяемыйТип.GTIN - GTIN, если возможно определить.
// 	 * ПредставлениеНоменклатуры - Строка - Строковое представление номенклатуры.
// 	 * Штрихкод - Строка - Значение штрихкода. Формат зависит от значения реквизита ШтрихКодВBase64.
// 	 * КодМаркировки - Строка - Значение кода маркировки.
// 	 * КодУпаковки - Строка - Значение кода упаковки, если код находится в какой-либо упаковке.
// 	 * ПолныйКодМаркировки - Строка - Значение полного кода маркировки в формате base64, если имеется в системе.
// 	 * ПолныйКодУпаковки - Строка - Значение полного кода упаковки в формате base64, если код находится в упаковке и имеется в системе.
// 	 * ШтрихКодВBase64 - Булево - Признак того, что в реквизите Штрихкод хранится значение кода в формате base64.
// 	 * НомерВГруппе - Строка - Номер кода в рамках одной группы (номер короба). Используется для объединения печати агрегированных данных.
// 	 * ШаблонЭтикетки - ОпределяемыйТип.ШаблонЭтикеткиИС - Шаблон этикетки для печати.
// 	 * СрокГодности - Дата - Срок годности, указанный в коде маркировки, при его наличии.
// 	 * Количество - Число - Количество экземпляров для печати.
// 	 * СодержимоеКоличество - Число - Количество элементов (кодов, упаковок), содержащихся в упаковке (логистической, групповой, наборе).
// 	ТабличныйДокумент - ТабличныйДокумент - результат печати
// 	СтруктураНастроек - Структура - Дополнительне параметры для печати
// 	СтандартнаяОбработка - Булево - Признак использования библиотечной печати
Процедура ПечатьЭтикетокИСМП(ТаблицаДляПечати, ТабличныйДокумент, СтруктураНастроек, СтандартнаяОбработка) Экспорт
	
	//++ НЕ ГОСИС
	Если Не СтруктураНастроек.ПечатьЭтикетокВТаблицу Тогда
		СтандартнаяОбработка = Ложь;
		ПечатьЭтикетокИЦенниковЛокализация.ДополнитьТаблицуШтрихкодамиУпаковок(ТаблицаДляПечати);
		ПечатьЭтикетокИЦенниковЛокализация.ПечатьЭтикетокИСМП(ТаблицаДляПечати, ТабличныйДокумент, СтруктураНастроек);
	КонецЕсли;
	//-- НЕ ГОСИС
	Возврат;
	
КонецПроцедуры

// Дополняет текст запроса для выбора связанных оснований
// Использутеся для определения связанных документов оснований, например:
// 	Формируем заказ поставщику, на основании Заказа на эмиссию, заказываем коды.
// 	На основании заказа поставщику вводим документ Приобритение товара.
// 	На основании Приобритения товара вводим документ Маркировка товаров и печатем новый код маркировки.
// 	Так как основания у документов Заказ на эмиссию и Маркировка товаров разные, - то определение связи между документами
// 	Заказ поставщику и Приобритение.
//
// 	Запрос содержит:
// - Установленный параметр Документ - исходный документ
// - Временную таблицу ДокументыОснования - исходный документ основания
// - Временную таблицу ОснованияДляПоискаСвязи - Выбранные документы оснований из исходного документа.
// 	Результат должен содержать одно поле создаваемой временной таблицы СвязанныеОснования,
//	значение которого присутсвует в определяемом типе ОснованиеЗаказНаЭмиссиюКодовМаркировкиИСМП.
//
// Параметры:
// 	ТекстЗапроса - Строка - Текст запроса.
// 	СтандартнаяОбработка - Булево - Призна включения переопределения.
Процедура ДополнитьТекстЗапросаСвязанныхДокументовОснований(ТекстЗапроса, СтандартнаяОбработка) Экспорт
	
	//++ НЕ ГОСИС
	СтандартнаяОбработка = Ложь;
	ИнтеграцияИСМПУТ.ДополнитьТекстЗапросаСвязанныхДокументовОснований(ТекстЗапроса, СтандартнаяОбработка);
	//-- НЕ ГОСИС
	Возврат;
	
КонецПроцедуры

// Обработчик события получения схемы компоновки данных для вывода на печать кодов маркировки в линейную таблицу.
// Если обработчик пустой, то будет использоваться библиотечная схема и стандартный набор полей.
// 
// Параметры:
// 	СхемаКомпоновкиДанных - Неопределено, СхемаКомпоновкиДанных - Схема компоновки данных для вывода на печать кодов маркировки.
Процедура ПриОпределенииСхемыКомпоновкиДанныхДляПечатиТаблицыКодовМаркировки(СхемаКомпоновкиДанных) Экспорт
	
	Возврат;
	
КонецПроцедуры

#КонецОбласти
////////////////////////////////////////////////////////////////////////////////
// ОбменСБанкамиИнтеграцияСобытия: механизм обмена электронными документами с банками.
//
////////////////////////////////////////////////////////////////////////////////
 
#Область СлужебныеПроцедурыИФункции   

Процедура СоздатьОписаниеОповещенияОНовыхПисьмах(Оповещения)
	
	ИмяОповещения = ОбменСБанкамиОповещенияОСобытиях.ИмяОповещенияОНовыхПисьмах();   
	Оповещение = СерверныеОповещения.НовоеСерверноеОповещение(ИмяОповещения); 
	Оповещение.ИмяМодуляПолучения = "ОбменСБанкамиИнтеграцияКлиентСобытия";	
	Оповещения.Вставить(Оповещение.Имя, Оповещение);
	
КонецПроцедуры 

Процедура СоздатьОписаниеОповещенияОНепрочитанныхПисьмах(Оповещения) 
	
	ИмяОповещения = ОбменСБанкамиОповещенияОСобытиях.ИмяОповещенияОНепрочитанныхПисьмах();   
	Оповещение = СерверныеОповещения.НовоеСерверноеОповещение(ИмяОповещения); 
	Оповещение.ИмяМодуляОтправки = "ОбменСБанкамиСлужебный";
	Оповещение.Вставить("ПериодПроверки",60*60*12);
	Оповещение.ИмяМодуляПолучения = "ОбменСБанкамиИнтеграцияКлиентСобытия"; 
	Оповещения.Вставить(Оповещение.Имя, Оповещение);	

КонецПроцедуры   

Процедура СоздатьОписаниеОповещенияОНеотправленныхПисьмах(Оповещения)
	
	ИмяОповещения = ОбменСБанкамиОповещенияОСобытиях.ИмяОповещенияОНеотправленныхПисьмах();   
	Оповещение = СерверныеОповещения.НовоеСерверноеОповещение(ИмяОповещения); 
	Оповещение.ИмяМодуляОтправки = "ОбменСБанкамиСлужебный";
	Оповещение.Вставить("ПериодПроверки",60*60*12);
	Оповещение.ИмяМодуляПолучения = "ОбменСБанкамиИнтеграцияКлиентСобытия"; 
	Оповещения.Вставить(Оповещение.Имя, Оповещение);
	
КонецПроцедуры

// См. ОбщегоНазначенияПереопределяемый.ПриДобавленииСерверныхОповещений
//
Процедура ПриДобавленииСерверныхОповещений(Оповещения) Экспорт
	
	Если Не ОбменСБанкамиОповещенияОСобытиях.ДоступноСерверноеОповещениеОНовыхДокументах() Тогда 
		Возврат;
	КонецЕсли;
	
	СостоянияПисем = ОбменСБанкамиСлужебныйВызовСервера.ТекущееСостояниеПисемСБанками();   
	Если Не СостоянияПисем.ЕстьНастройка 
		Или Не СостоянияПисем.ЕстьПравоЧтенияДанных 
		Или Не СостоянияПисем.ИспользуетсяОбменСБанками Тогда
		Возврат;
	КонецЕсли; 
	
	СоздатьОписаниеОповещенияОНовыхПисьмах(Оповещения);    
	СоздатьОписаниеОповещенияОНепрочитанныхПисьмах(Оповещения);
	СоздатьОписаниеОповещенияОНеотправленныхПисьмах(Оповещения);
  	
КонецПроцедуры    

 #КонецОбласти
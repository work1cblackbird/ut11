
#Область СлужебныеПроцедурыИФункции

// Серверный обработчик события ОбработкаПолученияДанныхВыбора перечисления ФормыОткрываемыеПриНачалеРаботыСистемы.
//
Процедура ФормыОткрываемыеПриНачалеРаботыСистемыОбработкаПолученияДанныхВыбора(ДанныеВыбора, Параметры, СтандартнаяОбработка) Экспорт
	
	Если ПолучитьФункциональнуюОпцию("БазоваяВерсия") Тогда
		СтандартнаяОбработка = Ложь;
		ОткрытиеФормПриНачалеРаботыСистемы.ИспользуемыеФормыПриНачалеРаботыСистемы(ДанныеВыбора, Параметры);
	КонецЕсли;
	
КонецПроцедуры

// Возвращает имя формы, которую необходимо открыть для выполнения настройки программы при первом запуске.
//
// Возвращаемое значение:
//  Строка - Форма начальной настройки программы
Функция ФормаНачальнойНастройкиПрограммы() Экспорт
	
	// Вернем имя формы помощника первого запуска
	УстановитьПривилегированныйРежим(Истина);
	
	ИмяФормы = "";
	//++ Локализация
	Запрос = Новый Запрос;
	Запрос.Текст =
	"ВЫБРАТЬ ПЕРВЫЕ 1
	|	1 КАК Количество
	|ИЗ
	|	РегистрСведений.ВерсииПодсистем КАК ВерсииПодсистем";
	
	Если Запрос.Выполнить().Пустой() Тогда
		
		Если СтандартныеПодсистемыСервер.ЭтоБазоваяВерсияКонфигурации() Тогда
			ИмяФормы = "Обработка.ПомощникНастройкиПараметровБазовойВерсии.Форма.Помощник"; // первый запуск базовой версии
		ИначеЕсли ОбщегоНазначенияУТ.ИДКонфигурации() = "УП2" Тогда
			ИмяФормы = ""; // первый запуск УП (ERP)
		ИначеЕсли ОбщегоНазначенияУТ.ИДКонфигурации() = "КА2" Тогда
			ИмяФормы = ""; // первый запуск КА2
		Иначе
			ИмяФормы = "ОбщаяФорма.ВыборВариантаНастройкиПрограммы"; // первый запуск УТ11
		КонецЕсли;
		
	КонецЕсли;
	//-- Локализация
	Возврат ИмяФормы;
	
КонецФункции

#КонецОбласти

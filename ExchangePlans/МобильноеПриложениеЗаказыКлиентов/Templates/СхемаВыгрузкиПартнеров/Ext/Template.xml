<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных1</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetQuery">
		<name>ОсновнойНаборДанных</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>Договор</dataPath>
			<field>Договор</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Договор</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ЕстьУточнениеЦен</dataPath>
			<field>ЕстьУточнениеЦен</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Есть уточнение цен</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ИдУсловиеПродаж</dataPath>
			<field>ИдУсловиеПродаж</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ИспользуютсяДоговорыКонтрагентов</dataPath>
			<field>ИспользуютсяДоговорыКонтрагентов</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Организация</dataPath>
			<field>Организация</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Организация</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПартнерКВыгрузке</dataPath>
			<field>ПартнерКВыгрузке</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Партнер к выгрузке</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Соглашение</dataPath>
			<field>Соглашение</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Соглашение</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТребуетсяУдаление</dataPath>
			<field>ТребуетсяУдаление</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Требуется удаление</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПартнерCode</dataPath>
			<field>ПартнерCode</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Партнер code</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПартнерDeletionMark</dataPath>
			<field>ПартнерDeletionMark</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Партнер deletion mark</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПартнерDescription</dataPath>
			<field>ПартнерDescription</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Партнер description</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПартнерERPКод</dataPath>
			<field>ПартнерERPКод</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Партнер ERPКод</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПартнерParent</dataPath>
			<field>ПартнерParent</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Партнер parent</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПартнерREF</dataPath>
			<field>ПартнерREF</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Партнер REF</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПартнерВидЦены</dataPath>
			<field>ПартнерВидЦены</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Партнер вид цены</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПартнерВремяДоставкиПо</dataPath>
			<field>ПартнерВремяДоставкиПо</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Партнер время доставки по</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПартнерВремяДоставкиС</dataPath>
			<field>ПартнерВремяДоставкиС</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Партнер время доставки С</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПартнерДополнительнаяИнформацияПоДоставке</dataPath>
			<field>ПартнерДополнительнаяИнформацияПоДоставке</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Партнер дополнительная информация по доставке</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПартнерОтгрузкаЗапрещена</dataPath>
			<field>ПартнерОтгрузкаЗапрещена</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Партнер отгрузка запрещена</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПартнерПричинаДобавленияВСтопЛист</dataPath>
			<field>ПартнерПричинаДобавленияВСтопЛист</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Партнер причина добавления в стоп лист</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПартнерРодительСсылка</dataPath>
			<field>ПартнерРодительСсылка</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Партнер родитель ссылка</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПартнерСамовывоз</dataPath>
			<field>ПартнерСамовывоз</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Партнер самовывоз</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПартнерСклад</dataPath>
			<field>ПартнерСклад</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Партнер склад</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПартнерСкладСсылка</dataPath>
			<field>ПартнерСкладСсылка</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Партнер склад ссылка</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПартнерСтрокаПоиска</dataPath>
			<field>ПартнерСтрокаПоиска</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Партнер строка поиска</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПартнерФормаОплатыСсылка</dataPath>
			<field>ПартнерФормаОплатыСсылка</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Партнер форма оплаты ссылка</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВидЦены</dataPath>
			<field>ВидЦены</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Вид цены</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КонтрагентDeletionMark</dataPath>
			<field>КонтрагентDeletionMark</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Контрагент deletion mark</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КонтрагентDescription</dataPath>
			<field>КонтрагентDescription</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Контрагент description</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КонтрагентИНН</dataPath>
			<field>КонтрагентИНН</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Контрагент ИНН</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КонтрагентКПП</dataPath>
			<field>КонтрагентКПП</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Контрагент КПП</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КонтрагентНаименованиеПолное</dataPath>
			<field>КонтрагентНаименованиеПолное</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Контрагент наименование полное</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КонтрагентПартнер</dataPath>
			<field>КонтрагентПартнер</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Контрагент партнер</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КонтрагентСсылка</dataPath>
			<field>КонтрагентСсылка</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Контрагент ссылка</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>КонтрагентЮрФизЛицо</dataPath>
			<field>КонтрагентЮрФизЛицо</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Контрагент юр физ лицо</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СоглашениеДата</dataPath>
			<field>СоглашениеДата</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Соглашение дата</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СоглашениеДействует</dataPath>
			<field>СоглашениеДействует</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Соглашение действует</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СоглашениеКомиссия</dataPath>
			<field>СоглашениеКомиссия</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Соглашение комиссия</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СоглашениеНаименование</dataPath>
			<field>СоглашениеНаименование</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Соглашение наименование</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СоглашениеНомер</dataPath>
			<field>СоглашениеНомер</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Соглашение номер</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СоглашениеПометкаУдаления</dataPath>
			<field>СоглашениеПометкаУдаления</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Соглашение пометка удаления</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СоглашениеСклад</dataPath>
			<field>СоглашениеСклад</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Соглашение склад</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СоглашениеТиповое</dataPath>
			<field>СоглашениеТиповое</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Соглашение типовое</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДоговорДата</dataPath>
			<field>ДоговорДата</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Договор дата</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДоговорНаименование</dataPath>
			<field>ДоговорНаименование</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Договор наименование</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДоговорНомер</dataPath>
			<field>ДоговорНомер</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Договор номер</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДоговорПометкаУдаления</dataPath>
			<field>ДоговорПометкаУдаления</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Договор пометка удаления</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВидЦеныНаименование</dataPath>
			<field>ВидЦеныНаименование</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Вид цены наименование</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВидЦеныПометкаУдаления</dataPath>
			<field>ВидЦеныПометкаУдаления</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Вид цены пометка удаления</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВидЦеныЦенаВключаетНДС</dataPath>
			<field>ВидЦеныЦенаВключаетНДС</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Вид цены цена включает НДС</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СоглашениеСегментНоменклатуры</dataPath>
			<field>СоглашениеСегментНоменклатуры</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Соглашение сегмент номенклатуры</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТребуетсяУдалениеПартнера</dataPath>
			<field>ТребуетсяУдалениеПартнера</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Требуется удаление партнера</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Выгружен</dataPath>
			<field>Выгружен</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Выгружен</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>АналитикаУчетаПоПартнерам</dataPath>
			<field>АналитикаУчетаПоПартнерам</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ЗаказКлиента</dataPath>
			<field>ЗаказКлиента</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Валюта</dataPath>
			<field>Валюта</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>СуммаДолгаПоДоговору</dataPath>
			<field>СуммаДолгаПоДоговору</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Сумма долга по договору</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>РасчетыПоДоговору</dataPath>
			<field>РасчетыПоДоговору</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Расчеты по договору</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ТребуетсяУдалениеДоговора</dataPath>
			<field>ТребуетсяУдалениеДоговора</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Требуется удаление договора</v8:content>
				</v8:item>
			</title>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	МоиПартнерыИзменения.Ссылка КАК ДоступныйПартнер
ПОМЕСТИТЬ РазрешенныеПартнеры
ИЗ
	Справочник.Партнеры.Изменения КАК МоиПартнерыИзменения
ГДЕ
	ТИПЗНАЧЕНИЯ(МоиПартнерыИзменения.Узел) = ТИП(ПланОбмена.МобильноеПриложениеЗаказыКлиентов)
	И МоиПартнерыИзменения.Узел = &amp;Узел
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	СегментыПартнеров.Ссылка КАК СегментПартнеров
ПОМЕСТИТЬ ДоступныеСегментыПартнеров
ИЗ
	Справочник.СегментыПартнеров КАК СегментыПартнеров

ИНДЕКСИРОВАТЬ ПО
	СегментПартнеров
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ПартнерыПоОтбору.Партнер КАК Партнер,
	ПартнерыПоОтбору.СегментПартнера КАК СегментПартнера
ПОМЕСТИТЬ ПартнерыПоОтбору
ИЗ
	(ВЫБРАТЬ РАЗЛИЧНЫЕ
		Сегменты.Партнер КАК Партнер,
		Сегменты.Сегмент КАК СегментПартнера
	ИЗ
		РегистрСведений.ПартнерыСегмента КАК Сегменты
	ГДЕ
		&amp;ИспользуетсяОтборПоСегментуПартнеров
		И Сегменты.Сегмент В
				(ВЫБРАТЬ
					ДоступныеСегментыПартнеров.СегментПартнеров
				ИЗ
					ДоступныеСегментыПартнеров)
	
	ОБЪЕДИНИТЬ ВСЕ
	
	ВЫБРАТЬ
		Партнеры.Ссылка,
		""
	ИЗ
		Справочник.Партнеры КАК Партнеры
	ГДЕ
		НЕ &amp;ИспользуетсяОтборПоСегментуПартнеров) КАК ПартнерыПоОтбору
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ПартнерыИзменения.Ссылка КАК ПартнерКВыгрузке,
	ПартнерыПоОтбору.СегментПартнера КАК СегментПартнера,
	Контрагенты.Ссылка КАК Контрагент,
	ВЫБОР
		КОГДА РазрешенныеПартнеры.ДоступныйПартнер ЕСТЬ NULL
			ТОГДА ИСТИНА
		КОГДА ПартнерыИзменения.Ссылка.ЮрФизЛицо ЕСТЬ NULL
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК ТребуетсяУдаление
ПОМЕСТИТЬ ДоступныеПартнеры
ИЗ
	Справочник.Партнеры.Изменения КАК ПартнерыИзменения
		ЛЕВОЕ СОЕДИНЕНИЕ РазрешенныеПартнеры КАК РазрешенныеПартнеры
		ПО (РазрешенныеПартнеры.ДоступныйПартнер = ПартнерыИзменения.Ссылка)
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.ИерархияПартнеров КАК ИерархияПартнеров
			ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.Контрагенты КАК Контрагенты
			ПО ИерархияПартнеров.Родитель = Контрагенты.Партнер
		ПО (ИерархияПартнеров.Партнер = ПартнерыИзменения.Ссылка)
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ПартнерыПоОтбору КАК ПартнерыПоОтбору
		ПО ПартнерыИзменения.Ссылка = ПартнерыПоОтбору.Партнер
ГДЕ
	ТИПЗНАЧЕНИЯ(ПартнерыИзменения.Узел) = ТИП(ПланОбмена.МобильноеПриложениеЗаказыКлиентов)
	И ПартнерыИзменения.Узел = &amp;Узел

ИНДЕКСИРОВАТЬ ПО
	ПартнерыИзменения.Ссылка,
	Контрагенты.Ссылка
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	МИНИМУМ(ЗаказКлиента.Партнер) КАК Партнер,
	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ ЗаказКлиента.Склад) КАК ВариантовСкладов,
	МИНИМУМ(ЗаказКлиента.Склад) КАК Склад,
	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ ЗаказКлиента.ФормаОплаты) КАК ВариантовФормОплаты,
	МИНИМУМ(ЗаказКлиента.ФормаОплаты) КАК ФормаОплаты,
	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ ЗаказКлиента.СпособДоставки) КАК ВариантовСпособовДоставки,
	МИНИМУМ(ЗаказКлиента.СпособДоставки) КАК СпособДоставки,
	МИНИМУМ(ЗаказКлиента.ВремяДоставкиС) КАК ВремяДоставкиС,
	МАКСИМУМ(ЗаказКлиента.ВремяДоставкиПо) КАК ВремяДоставкиПо,
	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ ВЫРАЗИТЬ(ЗаказКлиента.ДополнительнаяИнформацияПоДоставке КАК СТРОКА(500))) КАК ВариантовДопИнформации,
	МИНИМУМ(ВЫРАЗИТЬ(ЗаказКлиента.ДополнительнаяИнформацияПоДоставке КАК СТРОКА(500))) КАК ДополнительнаяИнформацияПоДоставке
ПОМЕСТИТЬ ЗаказыКлиентов
ИЗ
	Документ.ЗаказКлиента КАК ЗаказКлиента
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ДоступныеПартнеры КАК ДоступныеПартнеры
		ПО (ДоступныеПартнеры.ПартнерКВыгрузке = ЗаказКлиента.Партнер)
			И (НЕ ДоступныеПартнеры.ТребуетсяУдаление)
ГДЕ
	ЗаказКлиента.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыЗаказовКлиентов.Закрыт)
	И ЗаказКлиента.Дата МЕЖДУ НАЧАЛОПЕРИОДА(ДОБАВИТЬКДАТЕ(&amp;Период, МЕСЯЦ, -2), МЕСЯЦ) И &amp;Период
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ЗаказКлиента.Партнер КАК Партнер,
	ВЫБОР
		КОГДА ЗаказКлиента.ВариантовСкладов &gt; 1
			ТОГДА &amp;ПустаяСтрока
		ИНАЧЕ ЗаказКлиента.Склад
	КОНЕЦ КАК Склад,
	ВЫБОР
		КОГДА ЗаказКлиента.ВариантовФормОплаты &gt; 1
			ТОГДА ЗНАЧЕНИЕ(Перечисление.ФормыОплаты.ПустаяСсылка)
		ИНАЧЕ ЗаказКлиента.ФормаОплаты
	КОНЕЦ КАК ФормаОплаты,
	ВЫБОР
		КОГДА ЗаказКлиента.ВариантовСпособовДоставки &gt; 1
			ТОГДА ЗНАЧЕНИЕ(Перечисление.СпособыДоставки.Самовывоз)
		ИНАЧЕ ЗаказКлиента.СпособДоставки
	КОНЕЦ КАК СпособДоставки,
	ЗаказКлиента.ВремяДоставкиС КАК ВремяДоставкиС,
	ЗаказКлиента.ВремяДоставкиПо КАК ВремяДоставкиПо,
	ВЫБОР
		КОГДА ЗаказКлиента.ВариантовДопИнформации &gt; 1
			ТОГДА &amp;ПустаяСтрока
		ИНАЧЕ ЗаказКлиента.ДополнительнаяИнформацияПоДоставке
	КОНЕЦ КАК ДополнительнаяИнформацияПоДоставке
ПОМЕСТИТЬ ИнформацияПоЗаказам
ИЗ
	ЗаказыКлиентов КАК ЗаказКлиента

ИНДЕКСИРОВАТЬ ПО
	Партнер
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ РАЗЛИЧНЫЕ
	ПартнерыСегмента.Партнер КАК Партнер
ПОМЕСТИТЬ ПартнерыОтгрузкаЗапрещена
ИЗ
	РегистрСведений.ПартнерыСегмента КАК ПартнерыСегмента
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ДоступныеПартнеры КАК ДоступныеПартнеры
		ПО (ДоступныеПартнеры.ПартнерКВыгрузке = ПартнерыСегмента.Партнер)
			И (НЕ ДоступныеПартнеры.ТребуетсяУдаление)
ГДЕ
	ПартнерыСегмента.Сегмент.ЗапретОтгрузки
	И НЕ ПартнерыСегмента.Сегмент.ЭтоГруппа
	И НЕ ПартнерыСегмента.Сегмент.ПометкаУдаления

ИНДЕКСИРОВАТЬ ПО
	ПартнерыСегмента.Партнер
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	Партнеры.Ссылка КАК ПартнерСсылка,
	ВЫРАЗИТЬ("" КАК СТРОКА(36)) КАК Ref,
	Партнеры.ПометкаУдаления КАК DeletionMark,
	Партнеры.Родитель КАК РодительСсылка,
	ВЫРАЗИТЬ("" КАК СТРОКА(36)) КАК Parent,
	Партнеры.Код КАК Code,
	Партнеры.Наименование КАК Description,
	ВЫРАЗИТЬ("" КАК СТРОКА(36)) КАК ERPКод,
	"" КАК ПартнерВидЦены,
	ЕСТЬNULL(ИнформацияПоЗаказам.ВремяДоставкиПо, ДАТАВРЕМЯ(1, 1, 1)) КАК ВремяДоставкиПо,
	ЕСТЬNULL(ИнформацияПоЗаказам.ВремяДоставкиС, ДАТАВРЕМЯ(1, 1, 1)) КАК ВремяДоставкиС,
	ЕСТЬNULL(ИнформацияПоЗаказам.ДополнительнаяИнформацияПоДоставке, ВЫРАЗИТЬ(Партнеры.Комментарий КАК СТРОКА(500))) КАК ДополнительнаяИнформацияПоДоставке,
	Партнеры.ПометкаУдаления
		ИЛИ ВЫБОР
			КОГДА &amp;ИспользоватьЗапретОтгрузки
				ТОГДА ВЫБОР
						КОГДА ПартнерыОтгрузкаЗапрещена.Партнер ЕСТЬ NULL
							ТОГДА ЛОЖЬ
						ИНАЧЕ ИСТИНА
					КОНЕЦ
			ИНАЧЕ ЛОЖЬ
		КОНЕЦ КАК ОтгрузкаЗапрещена,
	ВЫБОР
		КОГДА Партнеры.ПометкаУдаления
			ТОГДА &amp;ТекстПартнерПометкаУдаления
		КОГДА &amp;ИспользоватьЗапретОтгрузки
			ТОГДА ВЫБОР
					КОГДА ПартнерыОтгрузкаЗапрещена.Партнер ЕСТЬ NULL
						ТОГДА &amp;ПустаяСтрока
					ИНАЧЕ &amp;ТекстСегментОтгрузкаЗапрещена
				КОНЕЦ
		ИНАЧЕ &amp;ПустаяСтрока
	КОНЕЦ КАК ПричинаДобавленияВСтопЛист,
	ВЫБОР
		КОГДА ЕСТЬNULL(ИнформацияПоЗаказам.СпособДоставки, ЗНАЧЕНИЕ(Перечисление.СпособыДоставки.Самовывоз)) = ЗНАЧЕНИЕ(Перечисление.СпособыДоставки.Самовывоз)
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК Самовывоз,
	ЕСТЬNULL(ИнформацияПоЗаказам.Склад, "") КАК СкладСсылка,
	ВЫРАЗИТЬ("" КАК СТРОКА(36)) КАК Склад,
	"" КАК СтрокаПоиска,
	ЕСТЬNULL(ИнформацияПоЗаказам.ФормаОплаты, &amp;ПустаяСтрока) КАК ФормаОплатыСсылка
ПОМЕСТИТЬ ИнофрмацияОПартнере
ИЗ
	Справочник.Партнеры КАК Партнеры
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ДоступныеПартнеры КАК ДоступныеПартнеры
		ПО (ДоступныеПартнеры.ПартнерКВыгрузке = Партнеры.Ссылка)
			И (НЕ ДоступныеПартнеры.ТребуетсяУдаление)
		ЛЕВОЕ СОЕДИНЕНИЕ ИнформацияПоЗаказам КАК ИнформацияПоЗаказам
		ПО (ИнформацияПоЗаказам.Партнер = Партнеры.Ссылка)
		ЛЕВОЕ СОЕДИНЕНИЕ ПартнерыОтгрузкаЗапрещена КАК ПартнерыОтгрузкаЗапрещена
		ПО (&amp;ИспользоватьЗапретОтгрузки)
			И (ПартнерыОтгрузкаЗапрещена.Партнер = Партнеры.Ссылка)
ГДЕ
	Партнеры.Клиент

ИНДЕКСИРОВАТЬ ПО
	ПартнерСсылка
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	СоглашенияСКлиентамиТовары.Ссылка КАК Ссылка,
	МАКСИМУМ(СоглашенияСКлиентамиТовары.НомерСтроки) КАК МаксимальныйНомерСтрокиТоваров
ПОМЕСТИТЬ СоглашенияТовары
ИЗ
	Справочник.СоглашенияСКлиентами.Товары КАК СоглашенияСКлиентамиТовары

СГРУППИРОВАТЬ ПО
	СоглашенияСКлиентамиТовары.Ссылка
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	СоглашенияСКлиентамиЦеновыеГруппы.Ссылка КАК Ссылка,
	МАКСИМУМ(СоглашенияСКлиентамиЦеновыеГруппы.НомерСтроки) КАК МаксимальныйНомерСтрокиЦеновыхГрупп
ПОМЕСТИТЬ СоглашенияЦеновыеГруппы
ИЗ
	Справочник.СоглашенияСКлиентами.ЦеновыеГруппы КАК СоглашенияСКлиентамиЦеновыеГруппы

СГРУППИРОВАТЬ ПО
	СоглашенияСКлиентамиЦеновыеГруппы.Ссылка
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	Партнеры.ПартнерКВыгрузке КАК Партнер,
	Партнеры.СегментПартнера КАК Сегмент,
	Организации.Ссылка КАК Организация,
	ВидыЦен.Ссылка КАК ВидЦены,
	ВидыЦен.ПометкаУдаления КАК ВидЦеныПометкаУдаления,
	ВидыЦен.Наименование КАК ВидЦеныНаименование,
	ВидыЦен.ЦенаВключаетНДС КАК ВидЦеныЦенаВключаетНДС,
	СоглашенияСКлиентамиПродажа.Ссылка КАК Соглашение,
	ЕСТЬNULL(Договоры.Ссылка, ЗНАЧЕНИЕ(Справочник.ДоговорыКонтрагентов.ПустаяСсылка)) КАК Договор,
	ЕСТЬNULL(Договоры.ПометкаУдаления, ИСТИНА) КАК ДоговорПометкаУдаления,
	ЕСТЬNULL(Договоры.Наименование, """") КАК ДоговорНаименование,
	ЕСТЬNULL(Договоры.Дата, ДАТАВРЕМЯ(1, 1, 1)) КАК ДоговорДата,
	ЕСТЬNULL(Договоры.Номер, """") КАК ДоговорНомер,
	ЕСТЬNULL(ВЫБОР
			КОГДА Договоры.ПорядокРасчетов = ЗНАЧЕНИЕ(Перечисление.ПорядокРасчетов.ПоДоговорамКонтрагентов)
				ТОГДА ИСТИНА
			ИНАЧЕ ЛОЖЬ
		КОНЕЦ, ЛОЖЬ) КАК РасчетыПоДоговору,
	Контрагенты.Ссылка КАК Контрагент,
	СоответствиеУсловийПродаж.ИдУсловиеПродаж КАК ИдУсловиеПродаж,
	СоглашенияСКлиентамиПродажа.ИспользуютсяДоговорыКонтрагентов КАК ИспользуютсяДоговорыКонтрагентов,
	СоглашенияСКлиентамиПродажа.ПометкаУдаления КАК ПометкаУдаления,
	СоглашенияСКлиентамиПродажа.Наименование КАК Наименование,
	СоглашенияСКлиентамиПродажа.Дата КАК Дата,
	ВЫБОР
		КОГДА СоглашенияСКлиентамиПродажа.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссию)
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК Комиссия,
	СоглашенияСКлиентамиПродажа.Номер КАК Номер,
	СоглашенияСКлиентамиПродажа.Склад КАК Склад,
	СоглашенияСКлиентамиПродажа.Типовое КАК Типовое,
	СоглашенияСКлиентамиПродажа.СегментНоменклатуры КАК СегментНоменклатуры,
	ВЫБОР
			КОГДА СоглашенияСКлиентамиПродажа.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыСоглашенийСКлиентами.Действует)
				ТОГДА ИСТИНА
			ИНАЧЕ ЛОЖЬ
		КОНЕЦ
		И ВЫБОР
			КОГДА СоглашенияСКлиентамиПродажа.ДатаНачалаДействия = ДАТАВРЕМЯ(1, 1, 1)
					ИЛИ НЕ СоглашенияСКлиентамиПродажа.ДатаНачалаДействия &gt; &amp;Период
				ТОГДА ИСТИНА
			ИНАЧЕ ЛОЖЬ
		КОНЕЦ
		И ВЫБОР
			КОГДА СоглашенияСКлиентамиПродажа.ДатаОкончанияДействия = ДАТАВРЕМЯ(1, 1, 1)
					ИЛИ НЕ СоглашенияСКлиентамиПродажа.ДатаОкончанияДействия &lt; &amp;Период
				ТОГДА ИСТИНА
			ИНАЧЕ ЛОЖЬ
		КОНЕЦ
		И СоглашенияСКлиентамиПродажа.Согласован
		И ВЫБОР
			КОГДА Договоры.Ссылка ЕСТЬ NULL
				ТОГДА ИСТИНА
			ИНАЧЕ Договоры.Согласован
		КОНЕЦ
		И ВЫБОР
			КОГДА Договоры.Ссылка ЕСТЬ NULL
				ТОГДА ИСТИНА
			ИНАЧЕ ВЫБОР
					КОГДА НЕ Договоры.ПометкаУдаления
							И Договоры.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыДоговоровКонтрагентов.Действует)
						ТОГДА ИСТИНА
					ИНАЧЕ ЛОЖЬ
				КОНЕЦ
		КОНЕЦ КАК Действует,
	ВЫБОР
		КОГДА ЕСТЬNULL(СоглашениеТовары.МаксимальныйНомерСтрокиТоваров, 0) &gt; 0
			ТОГДА ИСТИНА
		ИНАЧЕ ВЫБОР
				КОГДА ЕСТЬNULL(СоглашениеЦеновыеГруппы.МаксимальныйНомерСтрокиЦеновыхГрупп, 0) &gt; 0
					ТОГДА ИСТИНА
				ИНАЧЕ ЛОЖЬ
			КОНЕЦ
	КОНЕЦ КАК ЕстьУточнениеЦен,
	ЕСТЬNULL(РасчетыСКлиентамиОстатки.СуммаОстаток + РасчетыСКлиентамиОстатки.ОтгружаетсяОстаток, 0) КАК СуммаДолгаПоДоговору,
	ВЫБОР
		КОГДА Договоры.Ссылка ЕСТЬ NULL
		ТОГДА ЛОЖЬ
		ИНАЧЕ Договоры.Партнер = Партнеры.ПартнерКВыгрузке.Родитель 
			И НЕ Договоры.РазрешенаРаботаСДочернимиПартнерами
	КОНЕЦ КАК ТребуетсяУдалениеДоговора
	
ПОМЕСТИТЬ УсловияПродаж
ИЗ
	Справочник.СоглашенияСКлиентами КАК СоглашенияСКлиентамиПродажа
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ДоступныеПартнеры КАК Партнеры
		ПО (Партнеры.ПартнерКВыгрузке.Клиент)
			И (ВЫБОР
				КОГДА СоглашенияСКлиентамиПродажа.Типовое
					ТОГДА ИСТИНА
				ИНАЧЕ СоглашенияСКлиентамиПродажа.Партнер = Партнеры.ПартнерКВыгрузке
			КОНЕЦ)
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.ПартнерыСегмента КАК ПартнерыСоглашения
		ПО (ПартнерыСоглашения.Партнер = Партнеры.ПартнерКВыгрузке)
			И (ВЫБОР
				КОГДА НЕ СоглашенияСКлиентамиПродажа.СегментПартнеров = ЗНАЧЕНИЕ(Справочник.СегментыПартнеров.ПустаяСсылка)
					ТОГДА СоглашенияСКлиентамиПродажа.СегментПартнеров = ПартнерыСоглашения.Сегмент
				ИНАЧЕ ИСТИНА
			КОНЕЦ)
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.ИерархияПартнеров КАК ИерархияПартнеров
			ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.Контрагенты КАК Контрагенты
			ПО ИерархияПартнеров.Родитель = Контрагенты.Партнер
		ПО (ИерархияПартнеров.Партнер = Партнеры.ПартнерКВыгрузке)
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.Организации КАК Организации
		ПО (ВЫБОР
				КОГДА СоглашенияСКлиентамиПродажа.Организация = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
					ТОГДА ИСТИНА
				ИНАЧЕ СоглашенияСКлиентамиПродажа.Организация = Организации.Ссылка
			КОНЕЦ)
			И (ВЫБОР
				КОГДА &amp;УправленческаяОрганизацияНеИспользуется
					ТОГДА НЕ Организации.Предопределенный
				ИНАЧЕ ИСТИНА
			КОНЕЦ)
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.ВидыЦен КАК ВидыЦен
		ПО (ВЫБОР
				КОГДА СоглашенияСКлиентамиПродажа.ВидЦен = ЗНАЧЕНИЕ(Справочник.ВидыЦен.ПустаяСсылка)
					ТОГДА ИСТИНА
				ИНАЧЕ СоглашенияСКлиентамиПродажа.ВидЦен = ВидыЦен.Ссылка
			КОНЕЦ)
			И СоглашенияСКлиентамиПродажа.ЦенаВключаетНДС = ВидыЦен.ЦенаВключаетНДС
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ДоговорыКонтрагентов КАК Договоры
		ПО (Договоры.Контрагент = Контрагенты.Ссылка)
			И (Договоры.Партнер = Партнеры.ПартнерКВыгрузке
				ИЛИ Договоры.Партнер = Партнеры.ПартнерКВыгрузке.Родитель)
			И (Договоры.Организация = Организации.Ссылка)
			И СоглашенияСКлиентамиПродажа.Валюта = Договоры.ВалютаВзаиморасчетов
			И (СоглашенияСКлиентамиПродажа.ИспользуютсяДоговорыКонтрагентов)
			И СоглашенияСКлиентамиПродажа.ХозяйственнаяОперация = Договоры.ХозяйственнаяОперация
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.РасчетыСКлиентами.Остатки(
				,
				АналитикаУчетаПоПартнерам В
					(ВЫБРАТЬ
						АналитикаПоПартнерам.КлючАналитики КАК КлючАналитики
					ИЗ
						РегистрСведений.АналитикаУчетаПоПартнерам КАК АналитикаПоПартнерам)) КАК РасчетыСКлиентамиОстатки
		ПО (РасчетыСКлиентамиОстатки.АналитикаУчетаПоПартнерам.Договор = Договоры.Ссылка)
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СоответствиеУсловийПродажМобильногоПриложения1СЗаказы КАК СоответствиеУсловийПродаж
		ПО (СоответствиеУсловийПродаж.Организация = Организации.Ссылка)
			И (СоответствиеУсловийПродаж.ВидЦены = ВидыЦен.Ссылка)
			И (СоответствиеУсловийПродаж.Партнер = Партнеры.ПартнерКВыгрузке)
			И (СоответствиеУсловийПродаж.Соглашение = СоглашенияСКлиентамиПродажа.Ссылка)
			И (СоответствиеУсловийПродаж.Контрагент = ЕСТЬNULL(Контрагенты.Ссылка, ЗНАЧЕНИЕ(Справочник.Контрагенты.ПустаяСсылка)))
			И (СоответствиеУсловийПродаж.Договор = ЕСТЬNULL(Договоры.Ссылка, ЗНАЧЕНИЕ(Справочник.ДоговорыКонтрагентов.ПустаяСсылка)))
		ЛЕВОЕ СОЕДИНЕНИЕ СоглашенияТовары КАК СоглашениеТовары
		ПО (СоглашениеТовары.Ссылка = СоглашенияСКлиентамиПродажа.Ссылка)
		ЛЕВОЕ СОЕДИНЕНИЕ СоглашенияЦеновыеГруппы КАК СоглашениеЦеновыеГруппы
		ПО (СоглашениеЦеновыеГруппы.Ссылка = СоглашенияСКлиентамиПродажа.Ссылка)
ГДЕ
	СоглашенияСКлиентамиПродажа.Валюта = &amp;Валюта
	И &amp;ИспользуютсяСегментыПартнеров
	И ВидыЦен.ИспользоватьПриПродаже
	И (СоглашенияСКлиентамиПродажа.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.РеализацияКлиенту)
			ИЛИ СоглашенияСКлиентамиПродажа.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссию))
	И ВЫБОР
			КОГДА &amp;ИспользованиеСоглашений = ЗНАЧЕНИЕ(Перечисление.ИспользованиеСоглашенийСКлиентами.ТолькоТиповыеСоглашения)
				ТОГДА СоглашенияСКлиентамиПродажа.Типовое
			ИНАЧЕ ВЫБОР
					КОГДА &amp;ИспользованиеСоглашений = ЗНАЧЕНИЕ(Перечисление.ИспользованиеСоглашенийСКлиентами.ТолькоИндивидуальныеСоглашения)
						ТОГДА НЕ СоглашенияСКлиентамиПродажа.Типовое
					ИНАЧЕ ИСТИНА
				КОНЕЦ
		КОНЕЦ
	И ВЫБОР
			КОГДА СоглашенияСКлиентамиПродажа.ИспользуютсяДоговорыКонтрагентов
				ТОГДА Договоры.Ссылка ЕСТЬ НЕ NULL 
			ИНАЧЕ ИСТИНА
		КОНЕЦ

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	Партнеры.ПартнерКВыгрузке,
	Партнеры.СегментПартнера,
	Организации.Ссылка,
	ВидыЦен.Ссылка,
	ВидыЦен.ПометкаУдаления,
	ВидыЦен.Наименование,
	ВидыЦен.ЦенаВключаетНДС,
	СоглашенияСКлиентамиПродажа.Ссылка,
	ЕСТЬNULL(Договоры.Ссылка, ЗНАЧЕНИЕ(Справочник.ДоговорыКонтрагентов.ПустаяСсылка)),
	ЕСТЬNULL(Договоры.ПометкаУдаления, ИСТИНА),
	ЕСТЬNULL(Договоры.Наименование, """"),
	ЕСТЬNULL(Договоры.Дата, ДАТАВРЕМЯ(1, 1, 1)),
	ЕСТЬNULL(Договоры.Номер, """"),
	ЕСТЬNULL(ВЫБОР
			КОГДА Договоры.ПорядокРасчетов = ЗНАЧЕНИЕ(Перечисление.ПорядокРасчетов.ПоДоговорамКонтрагентов)
				ТОГДА ИСТИНА
			ИНАЧЕ ЛОЖЬ
		КОНЕЦ, ЛОЖЬ),
	Контрагенты.Ссылка,
	СоответствиеУсловийПродаж.ИдУсловиеПродаж,
	СоглашенияСКлиентамиПродажа.ИспользуютсяДоговорыКонтрагентов,
	СоглашенияСКлиентамиПродажа.ПометкаУдаления,
	СоглашенияСКлиентамиПродажа.Наименование,
	СоглашенияСКлиентамиПродажа.Дата,
	ВЫБОР
		КОГДА СоглашенияСКлиентамиПродажа.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссию)
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ,
	СоглашенияСКлиентамиПродажа.Номер,
	СоглашенияСКлиентамиПродажа.Склад,
	СоглашенияСКлиентамиПродажа.Типовое,
	СоглашенияСКлиентамиПродажа.СегментНоменклатуры,
	ВЫБОР
			КОГДА СоглашенияСКлиентамиПродажа.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыСоглашенийСКлиентами.Действует)
				ТОГДА ИСТИНА
			ИНАЧЕ ЛОЖЬ
		КОНЕЦ
		И ВЫБОР
			КОГДА СоглашенияСКлиентамиПродажа.ДатаНачалаДействия = ДАТАВРЕМЯ(1, 1, 1)
					ИЛИ НЕ СоглашенияСКлиентамиПродажа.ДатаНачалаДействия &gt; &amp;Период
				ТОГДА ИСТИНА
			ИНАЧЕ ЛОЖЬ
		КОНЕЦ
		И ВЫБОР
			КОГДА СоглашенияСКлиентамиПродажа.ДатаОкончанияДействия = ДАТАВРЕМЯ(1, 1, 1)
					ИЛИ НЕ СоглашенияСКлиентамиПродажа.ДатаОкончанияДействия &lt; &amp;Период
				ТОГДА ИСТИНА
			ИНАЧЕ ЛОЖЬ
		КОНЕЦ
		И СоглашенияСКлиентамиПродажа.Согласован
		И ВЫБОР
			КОГДА Договоры.Ссылка ЕСТЬ NULL
				ТОГДА ИСТИНА
			ИНАЧЕ Договоры.Согласован
		КОНЕЦ
		И ВЫБОР
			КОГДА Договоры.Ссылка ЕСТЬ NULL
				ТОГДА ИСТИНА
			ИНАЧЕ ВЫБОР
					КОГДА НЕ Договоры.ПометкаУдаления
							И Договоры.Статус = ЗНАЧЕНИЕ(Перечисление.СтатусыДоговоровКонтрагентов.Действует)
						ТОГДА ИСТИНА
					ИНАЧЕ ЛОЖЬ
				КОНЕЦ
		КОНЕЦ,
	ВЫБОР
		КОГДА ЕСТЬNULL(СоглашениеТовары.МаксимальныйНомерСтрокиТоваров, 0) &gt; 0
			ТОГДА ИСТИНА
		ИНАЧЕ ВЫБОР
				КОГДА ЕСТЬNULL(СоглашениеЦеновыеГруппы.МаксимальныйНомерСтрокиЦеновыхГрупп, 0) &gt; 0
					ТОГДА ИСТИНА
				ИНАЧЕ ЛОЖЬ
			КОНЕЦ
	КОНЕЦ,
	ЕСТЬNULL(РасчетыСКлиентамиОстатки.СуммаОстаток + РасчетыСКлиентамиОстатки.ОтгружаетсяОстаток, 0),
	ВЫБОР
		КОГДА Договоры.Ссылка ЕСТЬ NULL
		ТОГДА ЛОЖЬ
		ИНАЧЕ Договоры.Партнер = Партнеры.ПартнерКВыгрузке.Родитель 
			И НЕ Договоры.РазрешенаРаботаСДочернимиПартнерами
	КОНЕЦ КАК ТребуетсяУдалениеДоговора
	
ИЗ
	Справочник.СоглашенияСКлиентами КАК СоглашенияСКлиентамиПродажа
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ДоступныеПартнеры КАК Партнеры
		ПО (Партнеры.ПартнерКВыгрузке.Клиент)
			И (ВЫБОР
				КОГДА СоглашенияСКлиентамиПродажа.Типовое
					ТОГДА ИСТИНА
				ИНАЧЕ СоглашенияСКлиентамиПродажа.Партнер = Партнеры.ПартнерКВыгрузке
			КОНЕЦ)
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.ИерархияПартнеров КАК ИерархияПартнеров
			ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.Контрагенты КАК Контрагенты
			ПО ИерархияПартнеров.Родитель = Контрагенты.Партнер
		ПО (ИерархияПартнеров.Партнер = Партнеры.ПартнерКВыгрузке)
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.Организации КАК Организации
		ПО (ВЫБОР
				КОГДА СоглашенияСКлиентамиПродажа.Организация = ЗНАЧЕНИЕ(Справочник.Организации.ПустаяСсылка)
					ТОГДА ИСТИНА
				ИНАЧЕ СоглашенияСКлиентамиПродажа.Организация = Организации.Ссылка
			КОНЕЦ)
			И (ВЫБОР
				КОГДА &amp;УправленческаяОрганизацияНеИспользуется
					ТОГДА НЕ Организации.Предопределенный
				ИНАЧЕ ИСТИНА
			КОНЕЦ)
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.ВидыЦен КАК ВидыЦен
		ПО (ВЫБОР
				КОГДА СоглашенияСКлиентамиПродажа.ВидЦен = ЗНАЧЕНИЕ(Справочник.ВидыЦен.ПустаяСсылка)
					ТОГДА ИСТИНА
				ИНАЧЕ СоглашенияСКлиентамиПродажа.ВидЦен = ВидыЦен.Ссылка
			КОНЕЦ)
			И СоглашенияСКлиентамиПродажа.ЦенаВключаетНДС = ВидыЦен.ЦенаВключаетНДС
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ДоговорыКонтрагентов КАК Договоры
		ПО (Договоры.Контрагент = Контрагенты.Ссылка)
			И (Договоры.Партнер = Партнеры.ПартнерКВыгрузке
				ИЛИ Договоры.Партнер = Партнеры.ПартнерКВыгрузке.Родитель)
			И (Договоры.Организация = Организации.Ссылка)
			И СоглашенияСКлиентамиПродажа.Валюта = Договоры.ВалютаВзаиморасчетов
			И (СоглашенияСКлиентамиПродажа.ИспользуютсяДоговорыКонтрагентов)
			И СоглашенияСКлиентамиПродажа.ХозяйственнаяОперация = Договоры.ХозяйственнаяОперация
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.РасчетыСКлиентами.Остатки(
				,
				АналитикаУчетаПоПартнерам В
					(ВЫБРАТЬ
						АналитикаПоПартнерам.КлючАналитики КАК КлючАналитики
					ИЗ
						РегистрСведений.АналитикаУчетаПоПартнерам КАК АналитикаПоПартнерам)) КАК РасчетыСКлиентамиОстатки
		ПО (РасчетыСКлиентамиОстатки.АналитикаУчетаПоПартнерам.Договор = Договоры.Ссылка)
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СоответствиеУсловийПродажМобильногоПриложения1СЗаказы КАК СоответствиеУсловийПродаж
		ПО (СоответствиеУсловийПродаж.Организация = Организации.Ссылка)
			И (СоответствиеУсловийПродаж.ВидЦены = ВидыЦен.Ссылка)
			И (СоответствиеУсловийПродаж.Партнер = Партнеры.ПартнерКВыгрузке)
			И (СоответствиеУсловийПродаж.Соглашение = СоглашенияСКлиентамиПродажа.Ссылка)
			И (СоответствиеУсловийПродаж.Контрагент = ЕСТЬNULL(Контрагенты.Ссылка, ЗНАЧЕНИЕ(Справочник.Контрагенты.ПустаяСсылка)))
			И (СоответствиеУсловийПродаж.Договор = ЕСТЬNULL(Договоры.Ссылка, ЗНАЧЕНИЕ(Справочник.ДоговорыКонтрагентов.ПустаяСсылка)))
		ЛЕВОЕ СОЕДИНЕНИЕ СоглашенияТовары КАК СоглашениеТовары
		ПО (СоглашениеТовары.Ссылка = СоглашенияСКлиентамиПродажа.Ссылка)
		ЛЕВОЕ СОЕДИНЕНИЕ СоглашенияЦеновыеГруппы КАК СоглашениеЦеновыеГруппы
		ПО (СоглашениеЦеновыеГруппы.Ссылка = СоглашенияСКлиентамиПродажа.Ссылка)
ГДЕ
	СоглашенияСКлиентамиПродажа.Валюта = &amp;Валюта
	И НЕ &amp;ИспользуютсяСегментыПартнеров
	И ВидыЦен.ИспользоватьПриПродаже
	И (СоглашенияСКлиентамиПродажа.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.РеализацияКлиенту)
			ИЛИ СоглашенияСКлиентамиПродажа.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссию))
	И ВЫБОР
			КОГДА &amp;ИспользованиеСоглашений = ЗНАЧЕНИЕ(Перечисление.ИспользованиеСоглашенийСКлиентами.ТолькоТиповыеСоглашения)
				ТОГДА СоглашенияСКлиентамиПродажа.Типовое
			ИНАЧЕ ВЫБОР
					КОГДА &amp;ИспользованиеСоглашений = ЗНАЧЕНИЕ(Перечисление.ИспользованиеСоглашенийСКлиентами.ТолькоИндивидуальныеСоглашения)
						ТОГДА НЕ СоглашенияСКлиентамиПродажа.Типовое
					ИНАЧЕ ИСТИНА
				КОНЕЦ
		КОНЕЦ
	И ВЫБОР
			КОГДА СоглашенияСКлиентамиПродажа.ИспользуютсяДоговорыКонтрагентов
				ТОГДА Договоры.Ссылка ЕСТЬ НЕ NULL 
			ИНАЧЕ ИСТИНА
		КОНЕЦ

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	Партнеры.ПартнерКВыгрузке,
	Партнеры.СегментПартнера,
	Организации.Ссылка,
	ВидыЦен.Ссылка,
	ВидыЦен.ПометкаУдаления,
	ВидыЦен.Наименование,
	ВидыЦен.ЦенаВключаетНДС,
	ЗНАЧЕНИЕ(Справочник.СоглашенияСКлиентами.ПустаяСсылка),
	ЕСТЬNULL(Договоры.Ссылка, ЗНАЧЕНИЕ(Справочник.ДоговорыКонтрагентов.ПустаяСсылка)),
	ЕСТЬNULL(Договоры.ПометкаУдаления, ИСТИНА),
	ЕСТЬNULL(Договоры.Наименование, """"),
	ЕСТЬNULL(Договоры.Дата, ДАТАВРЕМЯ(1, 1, 1)),
	ЕСТЬNULL(Договоры.Номер, """"),
	ЕСТЬNULL(ВЫБОР
			КОГДА Договоры.ПорядокРасчетов = ЗНАЧЕНИЕ(Перечисление.ПорядокРасчетов.ПоДоговорамКонтрагентов)
				ТОГДА ИСТИНА
			ИНАЧЕ ЛОЖЬ
		КОНЕЦ, ЛОЖЬ),
	Контрагенты.Ссылка,
	СоответствиеУсловийПродаж.ИдУсловиеПродаж,
	&amp;ИспользуютсяДоговорыКонтрагентов,
	ЛОЖЬ,
	ЕСТЬNULL(Договоры.Наименование, &amp;НаименованиеТиповогоДоговора),
	ДАТАВРЕМЯ(1, 1, 1),
	ВЫБОР
		КОГДА Договоры.Ссылка ЕСТЬ NULL
			ТОГДА ЛОЖЬ
		ИНАЧЕ Договоры.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссию)
	КОНЕЦ,
	"""",
	ЗНАЧЕНИЕ(Справочник.Склады.ПустаяСсылка),
	ИСТИНА,
	ЗНАЧЕНИЕ(Справочник.СегментыНоменклатуры.ПустаяСсылка),
	ИСТИНА,
	ЛОЖЬ,
	ЕСТЬNULL(РасчетыСКлиентамиОстатки.СуммаОстаток + РасчетыСКлиентамиОстатки.ОтгружаетсяОстаток, 0),
	ВЫБОР
		КОГДА Договоры.Ссылка ЕСТЬ NULL
		ТОГДА ЛОЖЬ
		ИНАЧЕ Договоры.Партнер = Партнеры.ПартнерКВыгрузке.Родитель 
			И НЕ Договоры.РазрешенаРаботаСДочернимиПартнерами
	КОНЕЦ КАК ТребуетсяУдалениеДоговора
	
ИЗ
	ДоступныеПартнеры КАК Партнеры
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.Организации КАК Организации
		ПО (ВЫБОР
				КОГДА &amp;УправленческаяОрганизацияНеИспользуется
					ТОГДА НЕ Организации.Предопределенный
				ИНАЧЕ ИСТИНА
			КОНЕЦ)
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.ВидыЦен КАК ВидыЦен
		ПО (ИСТИНА)
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.ИерархияПартнеров КАК ИерархияПартнеров
			ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.Контрагенты КАК Контрагенты
			ПО ИерархияПартнеров.Родитель = Контрагенты.Партнер
		ПО (ИерархияПартнеров.Партнер = Партнеры.ПартнерКВыгрузке)
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ДоговорыКонтрагентов КАК Договоры
		ПО (Договоры.Контрагент = Контрагенты.Ссылка)
			И (Договоры.Партнер = Партнеры.ПартнерКВыгрузке
				ИЛИ Договоры.Партнер = Партнеры.ПартнерКВыгрузке.Родитель)
			И (Договоры.Организация = Организации.Ссылка)
			И (&amp;Валюта = Договоры.ВалютаВзаиморасчетов)
			И (&amp;ИспользуютсяДоговорыКонтрагентов)
			И (Договоры.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.РеализацияКлиенту)
				ИЛИ Договоры.ХозяйственнаяОперация = ЗНАЧЕНИЕ(Перечисление.ХозяйственныеОперации.ПередачаНаКомиссию))
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.РасчетыСКлиентами.Остатки(
				,
				АналитикаУчетаПоПартнерам В
					(ВЫБРАТЬ
						АналитикаПоПартнерам.КлючАналитики КАК КлючАналитики
					ИЗ
						РегистрСведений.АналитикаУчетаПоПартнерам КАК АналитикаПоПартнерам)) КАК РасчетыСКлиентамиОстатки
		ПО (РасчетыСКлиентамиОстатки.АналитикаУчетаПоПартнерам.Договор = Договоры.Ссылка)
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.СоответствиеУсловийПродажМобильногоПриложения1СЗаказы КАК СоответствиеУсловийПродаж
		ПО (СоответствиеУсловийПродаж.Организация = Организации.Ссылка)
			И (СоответствиеУсловийПродаж.ВидЦены = ВидыЦен.Ссылка)
			И (СоответствиеУсловийПродаж.Партнер = Партнеры.ПартнерКВыгрузке)
			И (СоответствиеУсловийПродаж.Соглашение = ЗНАЧЕНИЕ(Справочник.СоглашенияСКлиентами.ПустаяСсылка))
			И (СоответствиеУсловийПродаж.Контрагент = ЕСТЬNULL(Контрагенты.Ссылка, ЗНАЧЕНИЕ(Справочник.Контрагенты.ПустаяСсылка)))
			И (СоответствиеУсловийПродаж.Договор = ЕСТЬNULL(Договоры.Ссылка, ЗНАЧЕНИЕ(Справочник.ДоговорыКонтрагентов.ПустаяСсылка)))
ГДЕ
	&amp;ИспользованиеСоглашений = ЗНАЧЕНИЕ(Перечисление.ИспользованиеСоглашенийСКлиентами.НеИспользовать)
	И Партнеры.ПартнерКВыгрузке.Клиент
	И ВидыЦен.ИспользоватьПриПродаже
	И ВЫБОР
			КОГДА &amp;ИспользуютсяДоговорыКонтрагентов
				ТОГДА Договоры.Ссылка ЕСТЬ НЕ NULL 
			ИНАЧЕ ИСТИНА
		КОНЕЦ

ИНДЕКСИРОВАТЬ ПО
	Партнер
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ РАЗЛИЧНЫЕ
	ЛОЖЬ КАК Выгружен,
	ДоступныеПартнеры.ПартнерКВыгрузке КАК ПартнерКВыгрузке,
	ДоступныеПартнеры.Контрагент КАК КонтрагентСсылка,
	ДоступныеПартнеры.Контрагент.ПометкаУдаления КАК КонтрагентDeletionMark,
	ДоступныеПартнеры.Контрагент.Наименование КАК КонтрагентDescription,
	ДоступныеПартнеры.Контрагент.ИНН КАК КонтрагентИНН,
	ДоступныеПартнеры.Контрагент.КПП КАК КонтрагентКПП,
	ДоступныеПартнеры.Контрагент.НаименованиеПолное КАК КонтрагентНаименованиеПолное,
	ДоступныеПартнеры.Контрагент.ЮрФизЛицо КАК КонтрагентЮрФизЛицо,
	ДоступныеПартнеры.Контрагент.Партнер КАК КонтрагентПартнер,
	ИнофрмацияОПартнере.Ref КАК ПартнерREF,
	ИнофрмацияОПартнере.DeletionMark КАК ПартнерDeletionMark,
	ИнофрмацияОПартнере.РодительСсылка КАК ПартнерРодительСсылка,
	ИнофрмацияОПартнере.Parent КАК ПартнерParent,
	ИнофрмацияОПартнере.Code КАК ПартнерCode,
	ИнофрмацияОПартнере.Description КАК ПартнерDescription,
	ИнофрмацияОПартнере.ERPКод КАК ПартнерERPКод,
	ИнофрмацияОПартнере.ПартнерВидЦены КАК ПартнерВидЦены,
	ИнофрмацияОПартнере.ВремяДоставкиПо КАК ПартнерВремяДоставкиПо,
	ИнофрмацияОПартнере.ВремяДоставкиС КАК ПартнерВремяДоставкиС,
	ИнофрмацияОПартнере.ДополнительнаяИнформацияПоДоставке КАК ПартнерДополнительнаяИнформацияПоДоставке,
	ИнофрмацияОПартнере.ОтгрузкаЗапрещена КАК ПартнерОтгрузкаЗапрещена,
	ИнофрмацияОПартнере.ПричинаДобавленияВСтопЛист КАК ПартнерПричинаДобавленияВСтопЛист,
	ИнофрмацияОПартнере.Самовывоз КАК ПартнерСамовывоз,
	ИнофрмацияОПартнере.СкладСсылка КАК ПартнерСкладСсылка,
	ИнофрмацияОПартнере.Склад КАК ПартнерСклад,
	ИнофрмацияОПартнере.СтрокаПоиска КАК ПартнерСтрокаПоиска,
	ИнофрмацияОПартнере.ФормаОплатыСсылка КАК ПартнерФормаОплатыСсылка,
	ВЫБОР
		КОГДА УсловияПродаж.Партнер ЕСТЬ NULL
			ТОГДА &amp;ИспользоватьСоглашенияИлиДоговоры
		КОГДА ИнофрмацияОПартнере.ПартнерСсылка ЕСТЬ NULL
			ТОГДА ИСТИНА
		КОГДА УсловияПродаж.Контрагент.ЮрФизЛицо = ЗНАЧЕНИЕ(Перечисление.ЮрФизЛицо.ЮрЛицоНеРезидент)
			ТОГДА ИСТИНА
		ИНАЧЕ ДоступныеПартнеры.ТребуетсяУдаление
	КОНЕЦ КАК ТребуетсяУдаление,
	ВЫБОР
		КОГДА ИнофрмацияОПартнере.ПартнерСсылка ЕСТЬ NULL
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК ТребуетсяУдалениеПартнера,
	УсловияПродаж.Организация КАК Организация,
	УсловияПродаж.ВидЦены КАК ВидЦены,
	УсловияПродаж.ВидЦеныПометкаУдаления КАК ВидЦеныПометкаУдаления,
	УсловияПродаж.ВидЦеныНаименование КАК ВидЦеныНаименование,
	УсловияПродаж.ВидЦеныЦенаВключаетНДС КАК ВидЦеныЦенаВключаетНДС,
	УсловияПродаж.Соглашение КАК Соглашение,
	УсловияПродаж.Договор КАК Договор,
	УсловияПродаж.ДоговорПометкаУдаления КАК ДоговорПометкаУдаления,
	УсловияПродаж.ДоговорНаименование КАК ДоговорНаименование,
	УсловияПродаж.ДоговорДата КАК ДоговорДата,
	УсловияПродаж.ДоговорНомер КАК ДоговорНомер,
	УсловияПродаж.ИдУсловиеПродаж КАК ИдУсловиеПродаж,
	УсловияПродаж.ИспользуютсяДоговорыКонтрагентов КАК ИспользуютсяДоговорыКонтрагентов,
	УсловияПродаж.ПометкаУдаления КАК СоглашениеПометкаУдаления,
	УсловияПродаж.Наименование КАК СоглашениеНаименование,
	ЕСТЬNULL(УсловияПродаж.Соглашение.Дата, ДАТАВРЕМЯ(1,1,1)) КАК СоглашениеДата,
	УсловияПродаж.Комиссия КАК СоглашениеКомиссия,
	ЕСТЬNULL(УсловияПродаж.Соглашение.Номер, """") КАК СоглашениеНомер,
	УсловияПродаж.Склад КАК СоглашениеСклад,
	ЕСТЬNULL(УсловияПродаж.Соглашение.Типовое, ЛОЖЬ) КАК СоглашениеТиповое,
	УсловияПродаж.СегментНоменклатуры КАК СоглашениеСегментНоменклатуры,
	УсловияПродаж.Действует КАК СоглашениеДействует,
	УсловияПродаж.ЕстьУточнениеЦен КАК ЕстьУточнениеЦен,
	УсловияПродаж.СуммаДолгаПоДоговору КАК СуммаДолгаПоДоговору,
	УсловияПродаж.РасчетыПоДоговору КАК РасчетыПоДоговору,
	УсловияПродаж.ТребуетсяУдалениеДоговора
ИЗ
	ДоступныеПартнеры КАК ДоступныеПартнеры
		ЛЕВОЕ СОЕДИНЕНИЕ УсловияПродаж КАК УсловияПродаж
		ПО (УсловияПродаж.Партнер = ДоступныеПартнеры.ПартнерКВыгрузке)
			И (УсловияПродаж.Контрагент = ДоступныеПартнеры.Контрагент)
		ЛЕВОЕ СОЕДИНЕНИЕ ИнофрмацияОПартнере КАК ИнофрмацияОПартнере
		ПО ДоступныеПартнеры.ПартнерКВыгрузке = ИнофрмацияОПартнере.ПартнерСсылка
ГДЕ
	ВЫБОР
			КОГДА &amp;ИспользованиеСоглашений = ЗНАЧЕНИЕ(Перечисление.ИспользованиеСоглашенийСКлиентами.НеИспользовать)
					И &amp;ИспользуютсяДоговорыКонтрагентов
				ТОГДА ЕСТЬNULL(УсловияПродаж.Соглашение.Типовое, ЛОЖЬ) = ЛОЖЬ
			ИНАЧЕ ИСТИНА
		КОНЕЦ

УПОРЯДОЧИТЬ ПО
	ПартнерКВыгрузке
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ РазрешенныеПартнеры
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ ДоступныеПартнеры
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ ДоступныеСегментыПартнеров
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ ПартнерыПоОтбору
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ ЗаказыКлиентов
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ ИнформацияПоЗаказам
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ ИнофрмацияОПартнере
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ СоглашенияТовары
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ СоглашенияЦеновыеГруппы
;

////////////////////////////////////////////////////////////////////////////////
УНИЧТОЖИТЬ УсловияПродаж</query>
	</dataSet>
	<parameter>
		<name>Период</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Период</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>Date</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>Узел</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Узел</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:string</v8:Type>
			<v8:StringQualifiers>
				<v8:Length>2</v8:Length>
				<v8:AllowedLength>Fixed</v8:AllowedLength>
			</v8:StringQualifiers>
		</valueType>
		<value xsi:type="xs:string"/>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>ПустаяСтрока</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Пустая строка</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:string</v8:Type>
			<v8:StringQualifiers>
				<v8:Length>36</v8:Length>
				<v8:AllowedLength>Variable</v8:AllowedLength>
			</v8:StringQualifiers>
		</valueType>
		<value xsi:type="xs:string"/>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>УправленческаяОрганизацияНеИспользуется</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Управленческая организация не используется</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:boolean</v8:Type>
		</valueType>
		<value xsi:type="xs:boolean">false</value>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>ИспользованиеСоглашений</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Использование соглашений</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:EnumRef.ИспользованиеСоглашенийСКлиентами</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>Валюта</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Валюта</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.Валюты</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>ИспользуютсяСегментыПартнеров</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Используются сегменты партнеров</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:boolean</v8:Type>
		</valueType>
		<value xsi:type="xs:boolean">false</value>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>ИспользоватьСоглашенияИлиДоговоры</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Использовать соглашения или договоры</v8:content>
			</v8:item>
		</title>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>ИспользоватьЗапретОтгрузки</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Использовать запрет отгрузки</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:boolean</v8:Type>
		</valueType>
		<value xsi:type="xs:boolean">false</value>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>ТекстСегментОтгрузкаЗапрещена</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Текст сегмент отгрузка запрещена</v8:content>
			</v8:item>
		</title>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>ТекстПартнерПометкаУдаления</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Текст партнер пометка удаления</v8:content>
			</v8:item>
		</title>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>ИспользуютсяДоговорыКонтрагентов</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Используются договоры контрагентов</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:boolean</v8:Type>
		</valueType>
		<value xsi:type="xs:boolean">false</value>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>НаименованиеТиповогоДоговора</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Наименование типового договора</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:string</v8:Type>
			<v8:StringQualifiers>
				<v8:Length>150</v8:Length>
				<v8:AllowedLength>Variable</v8:AllowedLength>
			</v8:StringQualifiers>
		</valueType>
		<value xsi:type="xs:string"/>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>ИспользуетсяОтборПоСегментуПартнеров</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Используется отбор по сегменту партнеров</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:boolean</v8:Type>
		</valueType>
		<value xsi:type="xs:boolean">false</value>
		<useRestriction>true</useRestriction>
	</parameter>
	<settingsVariant>
		<dcsset:name>Основной</dcsset:name>
		<dcsset:presentation xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Основной</v8:content>
			</v8:item>
		</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ВидЦены</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ВидЦеныНаименование</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ВидЦеныПометкаУдаления</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ВидЦеныЦенаВключаетНДС</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Выгружен</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Договор</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ДоговорДата</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ДоговорНаименование</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ДоговорНомер</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ДоговорПометкаУдаления</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ЕстьУточнениеЦен</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ИдУсловиеПродаж</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ИспользуютсяДоговорыКонтрагентов</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>КонтрагентDeletionMark</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>КонтрагентDescription</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>КонтрагентИНН</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>КонтрагентКПП</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>КонтрагентНаименованиеПолное</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>КонтрагентПартнер</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>КонтрагентСсылка</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>КонтрагентЮрФизЛицо</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Организация</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПартнерCode</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПартнерDeletionMark</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПартнерDescription</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПартнерERPКод</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПартнерParent</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПартнерREF</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПартнерВидЦены</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПартнерВремяДоставкиПо</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПартнерВремяДоставкиС</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПартнерДополнительнаяИнформацияПоДоставке</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПартнерКВыгрузке</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПартнерОтгрузкаЗапрещена</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПартнерПричинаДобавленияВСтопЛист</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПартнерРодительСсылка</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПартнерСамовывоз</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПартнерСклад</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПартнерСкладСсылка</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПартнерСтрокаПоиска</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПартнерФормаОплатыСсылка</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>Соглашение</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СоглашениеДата</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СоглашениеДействует</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СоглашениеКомиссия</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СоглашениеНаименование</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СоглашениеНомер</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СоглашениеПометкаУдаления</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СоглашениеСегментНоменклатуры</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СоглашениеСклад</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СоглашениеТиповое</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ТребуетсяУдаление</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ТребуетсяУдалениеПартнера</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>СуммаДолгаПоДоговору</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>РасчетыПоДоговору</dcsset:field>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ТребуетсяУдалениеДоговора</dcsset:field>
				</dcsset:item>
			</dcsset:selection>
			<dcsset:order>
				<dcsset:item xsi:type="dcsset:OrderItemField">
					<dcsset:field>ТребуетсяУдалениеПартнера</dcsset:field>
					<dcsset:orderType>Desc</dcsset:orderType>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:OrderItemField">
					<dcsset:field>ПартнерКВыгрузке</dcsset:field>
					<dcsset:orderType>Asc</dcsset:orderType>
				</dcsset:item>
			</dcsset:order>
			<dcsset:item xsi:type="dcsset:StructureItemGroup">
				<dcsset:order>
					<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
				</dcsset:order>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
				</dcsset:selection>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>
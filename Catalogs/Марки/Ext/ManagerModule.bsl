#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ПрограммныйИнтерфейс

// Получает марку, если марка для указанного производителя марка одна в справочнике
// Параметры:
// Производитель - СправочникСсылка.Производители - производитель, которому принадлежит марка.
//
// Возвращаемое значение:
// СправочникСсылка.Марки - Найденный формат магазина, пустая ссылка если марок нет или больше одной.
//
Функция ПолучитьМаркуПоУмолчанию(Производитель) Экспорт
	
	Запрос = Новый Запрос(
	"ВЫБРАТЬ РАЗРЕШЕННЫЕ ПЕРВЫЕ 2
	|	Марки.Ссылка КАК Марка
	|ИЗ
	|	Справочник.Марки КАК Марки
	|ГДЕ
	|	(НЕ Марки.ЭтоГруппа)
	|	И (НЕ Марки.ПометкаУдаления)
	|	И (Марки.Производитель = &Производитель)
	|");
	Запрос.УстановитьПараметр("Производитель", Производитель);
	Выборка = Запрос.Выполнить().Выбрать();
	Если Выборка.Следующий() И Выборка.Количество() = 1 Тогда
		Марка = Выборка.Марка;
	Иначе
		Марка = Справочники.Марки.ПустаяСсылка();
	КонецЕсли;
	
	Возврат Марка;

КонецФункции

#КонецОбласти

#КонецЕсли
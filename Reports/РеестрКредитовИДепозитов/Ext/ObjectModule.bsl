#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

#Область ОбработчикиСобытий

Процедура ПриКомпоновкеРезультата(ДокументРезультат, ДанныеРасшифровки, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	ПользовательскиеНастройкиМодифицированы = Ложь;
	
	ПараметрСтатусДоговора = КомпоновкаДанныхКлиентСервер.ПолучитьПараметр(КомпоновщикНастроек, "СтатусДоговора");
	Если ПараметрСтатусДоговора <> Неопределено Тогда
		Если ПараметрСтатусДоговора.Значение = Неопределено Тогда
			КомпоновкаДанныхКлиентСервер.УстановитьПараметр(КомпоновщикНастроек, "СтатусДоговора", Перечисления.СтатусыДоговоровКонтрагентов.ПустаяСсылка());
			
			ПользовательскиеНастройкиМодифицированы = Истина;
		КонецЕсли;
	КонецЕсли;
	
	Если НЕ ПолучитьФункциональнуюОпцию("ИспользоватьНесколькоВалют") Тогда
		ПараметрВалюта = КомпоновкаДанныхКлиентСервер.ПолучитьПараметр(КомпоновщикНастроек, "ВалютаВзаиморасчетов");
		ПараметрВалюта.Значение = Константы.БазоваяВалютаПоУмолчанию.Получить();
		Макет6 = СхемаКомпоновкиДанных.Макеты.Макет6; // ОписаниеМакетаСхемыКомпоновкиДанных
		ПараметрВалюта = Макет6.Параметры.Валюта; // ПараметрОбластиВыражениеКомпоновкиДанных 
		ПараметрВалюта.Выражение = "Представление(ПараметрыДанных.ВалютаВзаиморасчетов)";
		ПараметрОплатаВВалюте = Макет6.Параметры.ОплатаВВалюте; // ПараметрОбластиВыражениеКомпоновкиДанных 
		ПараметрОплатаВВалюте.Выражение = "Представление(ПараметрыДанных.ВалютаВзаиморасчетов)";
	КонецЕсли;
	
	// Сформируем отчет
	НастройкиОтчета = КомпоновщикНастроек.ПолучитьНастройки();

	КомпоновщикМакета = Новый КомпоновщикМакетаКомпоновкиДанных;
	МакетКомпоновки = КомпоновщикМакета.Выполнить(СхемаКомпоновкиДанных, НастройкиОтчета, ДанныеРасшифровки);
	
	ПроцессорКомпоновки = Новый ПроцессорКомпоновкиДанных;
	ПроцессорКомпоновки.Инициализировать(МакетКомпоновки, , ДанныеРасшифровки, Истина);

	ПроцессорВывода = Новый ПроцессорВыводаРезультатаКомпоновкиДанныхВТабличныйДокумент;
	ПроцессорВывода.УстановитьДокумент(ДокументРезультат);
	ПроцессорВывода.Вывести(ПроцессорКомпоновки);
	
	// Сообщим форме отчета, что настройки модифицированы
	Если ПользовательскиеНастройкиМодифицированы Тогда
		КомпоновщикНастроек.ПользовательскиеНастройки.ДополнительныеСвойства.Вставить("ПользовательскиеНастройкиМодифицированы", Истина);
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#КонецЕсли
